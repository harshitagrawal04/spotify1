"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[1221],{31221:(e,t,a)=>{a.d(t,{z2:()=>V});var r=a(30758),i=a(97500),n=a.n(i),s=a(54227),o=a(40638),l=a(28754);function c(e,t,a){const r=e.current;if(null===r)return 0;const i=r.getBoundingClientRect();return"vertical"===a?1-Math.max(0,Math.min((t.clientY-i.top)/i.height,1)):Math.max(0,Math.min((t.clientX-i.left)/i.width,1))}var d=a(53944),h=a(33100),u=a(69897);const g=20,f=[{name:"dark",frames:g},{name:"normal",frames:g},{name:"dark",frames:g},{name:"normal",frames:g},{name:"dark",frames:320},{name:"dark",frames:80,isStartOfFlashlightEnter:!0},{name:"flashlight-on",frames:g},{name:"dark",frames:g},{name:"flashlight-on",frames:g},{name:"dark",frames:40},{name:"flashlight-on",isInfinite:!0},{name:"dark",frames:g,isStartOfExit:!0},{name:"flashlight-on",frames:g},{name:"dark",frames:g},{name:"flashlight-on",frames:g},{name:"dark",frames:g},{name:"normal",isInfinite:!0,isEndOfExit:!0}];function m(e,t){const a=document.createElement("canvas"),r=a.getContext("2d");if(null===r)return null;const i=Math.sqrt(e**2+t**2),n=200;return a.width=i/1.5+400,a.height=i+400,r.translate(n,n),{canvas:a,context:r,width:a.width-400,height:a.height-400,padding:n}}function b(e,t,a,r,i=0){const n=r/2*Math.PI/180,s=a/Math.cos(n),o=Math.sin(n)*s*2;e.beginPath(),e.moveTo((t-o)/2,i),e.lineTo(t/2,i+a),e.lineTo((t-o)/2+o,i),e.closePath()}function p(e,t){const a=function(e,t){const a=(0,r.useMemo)((()=>{const e=new Image;return e.src=(0,u.b)("images/stranger-things-nether-bottom-left.png"),e}),[]),i=(0,r.useMemo)((()=>{const e=new Image;return e.src=(0,u.b)("images/stranger-things-nether-bottom-right.png"),e}),[]);return function(r){if(i){const a=e-i.naturalWidth,n=t-i.naturalHeight;r.drawImage(i,0,0,i.naturalWidth,i.naturalHeight,a,n,i.naturalWidth,i.naturalHeight)}if(a){const e=0,i=t-a.naturalHeight;r.drawImage(a,0,0,a.naturalWidth,a.naturalHeight,e,i,a.naturalWidth,a.naturalHeight)}}}(e,t),[i,n]=(0,r.useState)(v(e,t)),[s,o]=(0,r.useState)(y(e,t));return(0,r.useEffect)((()=>{n(v(e,t)),o(y(e,t))}),[e,t]),(r,n,o,l)=>{if(!i||!s)return;const c=o/100,d=n.left+n.width*c,h=n.top+n.height/2;let u=0;u=c>.5?(c-.5)/.5*-60:60-c/.5*60;const g=i.width,m=i.height,b=-i.width/2,p=-i.height,v=g,y=m;r.save(),r.fillStyle="rgba(0, 0, 0, 0.85)",r.fillRect(0,0,e,t);const w=r.createLinearGradient(e/2,0,e/2,t);w.addColorStop(0,"rgba(57, 139, 216, 0.3)"),w.addColorStop(1,"rgba(0, 29, 62, 0.15)"),r.fillStyle=w,r.fillRect(0,0,e,t),"flashlight-on"===f[l].name?(r.save(),r.translate(d,h),r.rotate(u*Math.PI/180),r.globalCompositeOperation="destination-out",r.drawImage(i,0,0,g,m,b,p+100,v,y),r.restore(),a(r),r.save(),r.translate(d,h),r.rotate(u*Math.PI/180),r.globalCompositeOperation="source-over",r.drawImage(s,0,0,g,m,b,p+100,v,y),r.restore()):a(r),r.restore()}}function v(e,t){const a=m(e,t);if(!a)return null;const{canvas:r,context:i,width:n,height:s,padding:o}=a,l=i.createLinearGradient(n/2,0,n/2,s);l.addColorStop(0,"rgba(0, 0, 0, 1)"),l.addColorStop(1,"rgba(0, 0, 0, 0)");const c=i.createLinearGradient(n/2,0,n/2,s);return c.addColorStop(.7,"rgba(0, 0, 0, 1)"),c.addColorStop(1,"rgba(0, 0, 0, 0)"),i.save(),i.fillStyle="rgba(0, 0, 0, 1)",b(i,n,s,30,120),i.filter="blur(10px)",i.fill(),i.restore(),i.globalCompositeOperation="destination-out",i.fillStyle=c,i.fillRect(-o,-o,n+2*o,s+2*o),i.globalCompositeOperation="source-over",i.fillStyle="rgba(0, 0, 0, 1)",b(i,n,s,5,40),i.filter="blur(30px)",i.fill(),i.fillStyle="rgba(0, 0, 0, 1)",b(i,n,s,30,80),i.filter="blur(40px)",i.fill(),i.restore(),i.globalCompositeOperation="destination-out",i.fillStyle=l,i.fillRect(-o,-o,n+2*o,s+2*o),r}function y(e,t){const a=m(e,t);if(!a)return null;const{canvas:r,context:i,width:n,height:s,padding:o}=a;i.save(),i.fillStyle="rgba(80, 170, 255, 0.6)",b(i,n,s,30,120),i.filter="blur(10px)",i.fill(),i.restore();const l=i.createLinearGradient(n/2,0,n/2,s);l.addColorStop(.7,"rgba(0, 0, 0, 1)"),l.addColorStop(1,"rgba(0, 0, 0, 0)"),i.globalCompositeOperation="destination-out",i.fillStyle=l,i.fillRect(-o,-o,n+2*o,s+2*o),i.globalCompositeOperation="source-over",i.fillStyle="rgba(80, 170, 255, 0.8)",b(i,n,s,5,40),i.filter="blur(30px)",i.fill(),i.fillStyle="rgba(80, 170, 255, 0.4)",b(i,n,s,30,150),i.filter="blur(40px)",i.fill(),i.restore(),i.save(),i.translate(n/2,s-140),i.scale(1,10),i.fillStyle="rgba(198, 238, 251, 0.2)",i.filter="blur(24px)",i.beginPath(),i.arc(0,0,22,0,2*Math.PI),i.fill(),i.fillStyle="rgba(234, 255, 255, 0.2)",i.filter="blur(18px)",i.beginPath(),i.arc(0,0,20,0,2*Math.PI),i.fill(),i.restore(),i.save(),i.translate(n/2,s-70),i.scale(1,5),i.fillStyle="rgba(198, 238, 251, 0.1)",i.filter="blur(14px)",i.beginPath(),i.arc(0,0,18,0,2*Math.PI),i.fill(),i.fillStyle="rgba(234, 255, 255, 0.1)",i.filter="blur(8px)",i.beginPath(),i.arc(0,0,20,0,2*Math.PI),i.fill(),i.restore(),i.fillStyle="rgba(100, 190, 255, 1)",i.filter="blur(22px)",i.beginPath(),i.arc(n/2,s+100,20,0,2*Math.PI),i.fill(),i.fillStyle="rgba(198, 238, 251, 1)",i.filter="blur(4px)",i.beginPath(),i.arc(n/2,s+100,14,0,2*Math.PI),i.fill(),i.fillStyle="rgba(234, 255, 255, 1)",i.filter="blur(1px)",i.beginPath(),i.arc(n/2,s+100,12,0,2*Math.PI),i.fill();const c=i.createLinearGradient(n/2,0,n/2,s);return c.addColorStop(0,"rgba(0, 0, 0, 1)"),c.addColorStop(1,"rgba(0, 0, 0, 0)"),i.globalCompositeOperation="destination-out",i.fillStyle=c,i.fillRect(-o,-o,n+2*o,s+2*o),i.globalCompositeOperation="source-over",r}const w=[{size:6,alpha:.5},{size:6,alpha:.4},{size:12,alpha:.3},{size:12,alpha:.3},{size:12,alpha:.3},{size:14,alpha:.2},{size:20,alpha:.2},{size:30,alpha:.2},{size:40,alpha:.1}];function S(e,t){const a=(0,r.useMemo)((()=>{const e=new Image;return e.src=(0,u.b)("images/stranger-things-spores.png"),e}),[]),[i,n]=(0,r.useState)(C(e,t));return(0,r.useEffect)((()=>{i?function(e,t,a){e.forEach((e=>{e.x=Math.random()*t,e.y=Math.random()*a}))}(i,e,t):n(C(e,t))}),[e,t,i]),function(r){null!==a&&i.forEach((i=>{i.x-=i.directionX*i.velocityX,i.y-=i.directionY*i.velocityY,i.y>t+10?(i.x=Math.random()*e,i.y=-10):i.x<-10&&(i.x=e+10,i.y=Math.random()*t);const n=i.spriteSheetX,s=i.spriteSheetY,o=i.x-i.size/2,l=i.y-i.size/2,c=i.size,d=i.size;r.save(),r.globalAlpha*=i.alpha,r.drawImage(a,n,s,64,64,o,l,c,d),r.restore()}))}}function C(e,t){const a=[];for(let r=0;r<100;r++){const r=Math.floor(Math.random()*w.length),i=Math.floor(8*Math.random()),n=Math.floor(2*Math.random()),s=w[r].size,o=w[r].alpha;a.push({alpha:o,size:s,spriteSheetX:64*i,spriteSheetY:64*n,x:Math.random()*e,y:Math.random()*t,directionX:Math.random()>.5?1:-1,directionY:Math.random()>.5?1:-1,velocityX:s/300,velocityY:s/400})}return a}class x{_subscribers=[];_active=!1;unsubscribeToActivity(e){const t=this._subscribers.findIndex((t=>t.fn===e));-1!==t&&(clearTimeout(this._subscribers[t].inactiveTimeout),this._subscribers.splice(t,1))}subscribeToActivity(e,t){this._subscribers.push({fn:t,msInactive:e,isActive:!1})}enableActivityMonitor(){window.addEventListener("mousemove",this._onActivity),window.addEventListener("mouseup",this._onActivity),window.addEventListener("keydown",this._onActivity),window.addEventListener("scroll",this._onActivity,!0)}disableActivityMonitor(){window.removeEventListener("mousemove",this._onActivity),window.removeEventListener("mouseup",this._onActivity),window.removeEventListener("keydown",this._onActivity),window.removeEventListener("scroll",this._onActivity,!0),this._subscribers.forEach((e=>clearTimeout(e.inactiveTimeout))),this._subscribers=[]}_onActivity=()=>{this._subscribers.forEach((e=>{this._active||(this._active=!0,e.fn(this._active)),clearTimeout(e.inactiveTimeout),e.inactiveTimeout=setTimeout((()=>{this._active=!1,e.fn(this._active)}),e.msInactive)}))}}class M{frame=0;lastPhaseFrame=0;phase=0;animationFrameRequestId=null;flickerTimerId=null;isPlaying=!0;start(){this.lastPhaseFrame=this.frame,this.phase=0;const e=()=>setTimeout((()=>{this.flickerTimerId=e(),this.isPlaying&&f[this.phase].isInfinite&&this.setPhase(f.findIndex((e=>e.isStartOfFlashlightEnter)))}),15e3*Math.random()+5e3);this.flickerTimerId=e()}stop(){const e=f.findIndex((e=>e.isStartOfExit));this.phase<e&&this.setPhase(e),null!==this.flickerTimerId&&clearTimeout(this.flickerTimerId)}setPhase(e){this.lastPhaseFrame=this.frame,this.phase=e}}const E="TNGv07zrye9gB_3ukweR";var I=a(86070);const k=e=>{const{getPercentage:t,isDragging:a=!1,isPlayingStrangerThings:i=!1,progressBar:n}=e,s=(0,r.useMemo)((()=>new x),[]),o=(0,r.useMemo)((()=>new M),[]),l=(0,r.useRef)(null),[c,d]=(0,r.useState)(null),[h,u]=(0,r.useState)(window.innerHeight),[g,m]=(0,r.useState)(window.innerWidth),[b,v]=(0,r.useState)(!1),[y,w]=(0,r.useState)(!1),C=S(g,h),k=p(g,h),P=(0,r.useCallback)((e=>{!a&&i&&(e?o.stop():(o.start(),w(!0)))}),[a,i,o]),T=(0,r.useCallback)((()=>{i&&(o.setPhase(f.findIndex((e=>e.isStartOfFlashlightEnter))),w(!0))}),[i,o]),A=(0,r.useCallback)((()=>{o.stop()}),[o]),R=(0,r.useCallback)((()=>{if(!y)return void v(!0);v(!1);const e=window.innerHeight,t=window.innerWidth;m(t),u(e)}),[y]),_=(0,r.useCallback)((()=>{if(!l.current)return;const{frame:e,lastPhaseFrame:a,phase:r}=o;if(o.frame=e+1,f[r].isEndOfExit)w(!1);else{if(f[r].isInfinite||e-a===f[r].frames&&o.setPhase(r+1),l.current.width=g,l.current.height=h,"normal"!==f[r].name){const e=l.current.getContext("2d");if(!e||!c)return;const a=t();k(e,c,a,r),C(e)}o.animationFrameRequestId=requestAnimationFrame(_)}}),[h,g,k,C,t,c,o]);return(0,r.useEffect)((()=>{window.addEventListener("resize",R);const e=s;return e.enableActivityMonitor(),e.subscribeToActivity(5e3,P),()=>{window.removeEventListener("resize",R),e.disableActivityMonitor(),e.unsubscribeToActivity(P)}}),[s,P,R]),(0,r.useEffect)((()=>{i||o.stop()}),[i,o]),(0,r.useEffect)((()=>{a?T():a||A()}),[a,T,A]),(0,r.useEffect)((()=>{y?(b&&R(),o.animationFrameRequestId=requestAnimationFrame(_)):o.animationFrameRequestId&&cancelAnimationFrame(o.animationFrameRequestId)}),[y,_,R,b,o]),(0,r.useEffect)((()=>{n.current&&d(n.current.getBoundingClientRect())}),[g,h,n]),y?(0,I.jsx)("canvas",{className:E,ref:l,width:g,height:h}):null};var P=a(17145);const T=e=>(0,h.NC)(P.c3z,{loadingValue:!1})&&e.isPlayingStrangerThings?(0,I.jsx)(k,{...e}):null;var A=a(56958),R=a(74891);const _="p1ULRzPc4bD8eQ4T_wyp",D="DFtdzavKSbEhwKYkPTa6",O="TywOcKZEqNynWecCiATc",N="NoOAOv6U6vtqj_ybS1Cd",z="w699O0LgQRghXyl3bs9u",F="oShi2lRbnhFkEr2LlUqC",L="ZqlJ1uWjMeen9ye7Y7GC",K="i_sFCqXc9E62sDov95kp",j="epWhU7hHGktzlO_dop6z",H="VI_bMRxDl9fS6qksct7W",Y="sW0M_K97doEB3B4Ts58i",q="DuvrswZugGajIFNXObAr",W="Vis45PPawTyED7Lt2_LI",B="Me6H5Q1tz8OUksn2_uYC",X="VebMsodzole2htLe4Fsk",U="GfN5haHC77OxfQqkHlIi",G="OVsKgmQSwhS2WVE1B9Kc",V=({value:e,max:t,step:a,labelText:i,isInteractive:h=!0,forceActiveStyles:u=!1,onDragStart:g,onDragMove:f,onDragEnd:m,saberConfig:b=null,easterEggConfig:p,isPlayingStrangerThings:v=!1,direction:y="horizontal",enableAnimation:w,updateFrequency:S,offFrequencyUpdate:C,className:x,showValueAsTimeOverHandle:M=!1,...E})=>{const k=(0,r.useRef)(null),{isDragging:P,onMouseDown:V}=(({progressBarRef:e,onDragStart:t,onDragMove:a,onDragEnd:i,direction:n="horizontal"})=>{const[s,d]=(0,r.useState)(!1),h=(0,r.useRef)(!1),u=(0,l.ZY)(),g=(0,r.useRef)(t),f=(0,r.useRef)(a),m=(0,r.useRef)(i);g.current=t,f.current=a,m.current=i;const b=(0,o.YQ)((t=>{f.current(c(e,t,n)),h.current=!0}),20,{leading:!0,maxWait:20});return{isDragging:s,onMouseDown:(0,r.useCallback)((t=>{const a=t=>{d(!1),b.cancel(),m.current(c(e,t,n),{wasDraggedBeforeReleased:h.current}),u?.removeEventListener("pointermove",b),h.current=!1};0===t.button&&(g.current(c(e,t,n)),d(!0),u?.addEventListener("pointermove",b),u?.addEventListener("pointerup",a,{once:!0}),h.current=!1)}),[b,e,n,u])}})({progressBarRef:k,onDragStart:g,onDragMove:f,onDragEnd:m,direction:y}),Q=(0,r.useRef)(null),[Z,$]=(0,r.useState)(0),J=(0,r.useCallback)((e=>{if(Q.current){const t=e.clientX-Q.current.getBoundingClientRect().left;t>=0&&$(t/Q.current.clientWidth*100)}}),[]),ee=h?100*Math.max(0,Math.min(1,e/t)):0,te=u||P,ae=h&&null!==b,re=h&&!(0,A.n)(),{isSeekingWithKeyboard:ie,handleKeyboardProgressStepping:ne}=(({onDragStart:e,onDragMove:t,onDragEnd:a})=>{const[i,n]=(0,r.useState)(!1),s=(0,o.YQ)((e=>{a(e,{wasDraggedBeforeReleased:!1}),n(!1)}),500,{leading:!1,trailing:!0}),l=(0,r.useCallback)((a=>{i||(e(a),n(!0)),t(a),s(a)}),[i,e,t,s]);return{isSeekingWithKeyboard:i,handleKeyboardProgressStepping:l}})({onDragStart:g,onDragMove:f,onDragEnd:m}),se=(0,r.useCallback)((e=>{const t=e.key;if(/^[0-9]$/.test(t)){const e=parseInt(t,10)/10;m(e,{wasDraggedBeforeReleased:!1})}}),[m]),oe=(0,r.useCallback)((()=>ee),[ee]),le=(0,l.ZY)(),ce=(0,r.useRef)(le?.visibilityState),de=le?.visibilityState,he=P||C||"hidden"===de||"hidden"===ce.current||ie||0===e;ce.current=de;const ue=w?F:"",ge=Z/100*t;return(0,I.jsxs)("div",{className:n()(_,x,{[D]:h,[L]:he}),"data-testid":E["data-testid"],children:[(0,I.jsx)(s.o,{disabled:!h,type:"range",min:0,max:t,value:e,step:a,onChange:e=>{ne(parseFloat(e.target.value)/t)},onKeyDown:se,"aria-valuetext":E["aria-valuetext"],children:i}),(0,I.jsxs)("div",{className:n()(O,{[H]:null!==b,[q]:te}),style:{...ae?b:null,...p?.bgColor?{"--fg-color":p.bgColor,"--is-active-fg-color":p.bgColor}:null,"--progress-bar-transform":`${ee}%`,"--hover-bar-transform":`${Z}%`,"--progress-bar-duration":`${Number(S)}ms`},ref:Q,onPointerDown:V,onMouseMove:M?J:void 0,"data-testid":"progress-bar",children:[ae?(0,I.jsx)("div",{className:Y,"data-testid":"progress-bar-saber-overlay"}):null,(0,I.jsxs)("div",{ref:k,className:N,"data-testid":"progress-bar-background",children:[(0,I.jsx)("div",{className:z,children:(0,I.jsx)("div",{className:K})}),(0,I.jsx)("div",{className:z,children:(0,I.jsx)("div",{className:n()(j,ue)})}),p&&p.imageUrlHandle?(0,I.jsx)("div",{className:n()(B,ue),children:(0,I.jsx)("img",{alt:"",className:X,src:p.imageUrlHandle,style:(0,d.Z)(p.imageTransformOverride)})}):(0,I.jsx)("div",{className:n()(W,ue),children:M&&P&&(0,I.jsx)("div",{className:U,children:(0,R.f)(e)})}),M&&!P&&(0,I.jsx)("div",{className:G,children:(0,R.f)(ge)})]}),re&&(0,I.jsx)("div",{style:{width:"100%"},children:(0,I.jsx)(T,{getPercentage:oe,progressBar:k,isPlayingStrangerThings:v,isDragging:P})})]})]})}},53944:(e,t,a)=>{a.d(t,{Z:()=>d,l:()=>c});var r=a(33100),i=a(77996),n=a(26597),s=a(92505),o=a(34645);const l=new Map([[i.K.BLACK_PANTHER,{bgColor:"#8E24E2"}],[i.K.ATTACK_ON_TITAN,{bgColor:"#D4000E"}],[i.K.SPIDERMAN,{bgColor:"#EC1C24"}],[i.K.BARBIE,{bgColor:"#F31FA5"}],[i.K.POKEMON,{bgColor:"#5193ED",imageUrlHandle:"https://open.spotifycdn.com/cdn/images/hacks/progress-bar-easter-eggs/b6e9f5218d18dd76f6de177a005907d3.png",imageTransformOverride:{translateX:-21,translateY:11,scale:.8}}],[i.K.SANRIO,{bgColor:"#E60012",imageUrlHandle:"https://open.spotifycdn.com/cdn/images/hacks/progress-bar-easter-eggs/d99c81563a104fb669598a31591f2e2a.png"}],[i.K.WICKED,{bgColor:"#6abe4e",imageUrlHandle:"https://open.spotifycdn.com/cdn/images/hacks/progress-bar-easter-eggs/5bff73c2b65d841a8315349b3e29f865.png",imageTransformOverride:{translateX:-27,translateY:5}}],[i.K.SANREMO,{bgColor:"#E6007E",imageUrlHandle:"https://open.spotifycdn.com/cdn/images/hacks/progress-bar-easter-eggs/a1e7292e3dd2b329b158bff55a961e2f.png",imageTransformOverride:{translateX:-10,translateY:5,scale:.8}}]]),c=()=>{const{isPlayingVariant:e}=(0,n.h)(),t=(0,r.NC)(o.Mw,{loadingValue:!1}),a=(0,s.o)((e=>{if(null===e)return!1;const t="queue"===e.item?.provider,a="autoplay"===e.item?.provider;return!t&&!a}));if(t&&a)return e?l.get(e):void 0},d=e=>{if(!e)return{};const{translateX:t,translateY:a,scale:r}=e;return{...void 0!==t?{"--translateX":`${t}%`}:{},...void 0!==a?{"--translateY":`${a}%`}:{},...void 0!==r?{"--scale":r}:{}}}}}]);
//# sourceMappingURL=1221.js.map