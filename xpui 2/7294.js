"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7294],{37294:(e,a,t)=>{t.d(a,{DsaModal:()=>ae});var s=t(30758),n=t(62411),i=t(44004),d=t(64753),r=t(66973);function o(e){return{name:"AdDSAEvent",environments:["browser","device","desktop"],data:e}}var l=t(79252),c=t(66105),m=t(81421),u=t(19103),h=t(63365),g=t(74891);const v="vkMQw77rXE4cp8xsAdzl",E="emw6kR941D2wReukhCAJ";var N=t(86070);const x=({advertiser:e,legalEntityName:a})=>{const{item:t}=(0,m.L)()||{item:null},s=t&&(0,h.N)(t)?t?.images:void 0,n=(0,g.h)(s);return(0,N.jsxs)("div",{className:v,children:[n&&(0,N.jsx)(u._,{className:E,src:n,loading:"lazy"}),(0,N.jsx)(i.E,{variant:"bodyMediumBold","aria-label":e,children:e}),a&&(0,N.jsx)(i.E,{variant:"bodySmall",semanticColor:"textSubdued","aria-label":a,children:a})]})};var f=t(84760),T=t(18538);function b(e){var a,t,n,i,d,r=e.size?T.$Z[e.size]:e.iconSize,o=(0,T._C)([{size:16,svgContent:"<path d='M6.5.003a.75.75 0 0 0-.75.75V12.25c0 .414.336.75.75.75h3a.75.75 0 0 0 .75-.75V.753a.75.75 0 0 0-.75-.75h-3ZM7.25 11.5V1.503h1.5V11.5h-1.5ZM0 16h16v-1.5H0V16Zm0-8.25A.75.75 0 0 1 .75 7h3a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-.75.75h-3a.75.75 0 0 1-.75-.75v-4.5Zm1.5.75v3H3v-3H1.5Zm10.75-4.504a.75.75 0 0 0-.75.75v7.5c0 .414.336.75.75.75h3a.75.75 0 0 0 .75-.75v-7.5a.75.75 0 0 0-.75-.75h-3Zm.75 7.5v-6h1.5v6H13Z'/>"},{size:24,svgContent:"<path d='M9.25 3a1 1 0 0 1 1-1h3.5a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-3.5a1 1 0 0 1-1-1V3Zm3.5 1h-1.5v12h1.5V4ZM22 22H2v-2h20v2ZM3 10a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h3.5a1 1 0 0 0 1-1v-6a1 1 0 0 0-1-1H3Zm1 6v-4h1.5v4H4Zm12.5-9a1 1 0 0 1 1-1H21a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-3.5a1 1 0 0 1-1-1V7Zm3.5 9V8h-1.5v8H20Z'/>"}],r||24),l=null!==(a=e.autoMirror)&&void 0!==a&&a;return s.createElement(T.In,Object.assign({},e,{autoMirror:l,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((i=e.title,d=e.titleId,i?"<title ".concat(d?'id="'.concat(d,'"'):"",">").concat(i,"</title>"):"")).concat((t=e.desc,n=e.descId,t?"<desc ".concat(n?'id="'.concat(n,'"'):"",">").concat(t,"</desc>"):"")).concat(o.svgContent)}}))}var y=t(48197);const R="khENZvA4G9EjpLQiINss",p="Fu87PEr0tL6oDjmw_X2H",j=({title:e,showTitle:a,children:t})=>(0,N.jsxs)("section",{className:R,children:[a&&(0,N.jsx)(i.E,{className:p,variant:"bodyMediumBold",as:"h3","aria-label":e,children:e}),t]});var A=t(47744);const _="P9gpV_sgryfUERYOdfor",w=({text:e,icon:a})=>(0,N.jsxs)(A.K,{className:_,condensed:!0,children:[a,(0,N.jsx)(i.E,{variant:"bodyMedium","aria-label":e,as:"h4",children:e})]});let I=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.AGE=1]="AGE",e[e.GEO=2]="GEO",e[e.GENDER=3]="GENDER",e[e.INTEREST=4]="INTEREST",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED",e}({});const S={fromJSON:e=>({targetingTypes:globalThis.Array.isArray(e?.targetingTypes)?e.targetingTypes.map((e=>function(e){switch(e){case 0:case"UNKNOWN":return I.UNKNOWN;case 1:case"AGE":return I.AGE;case 2:case"GEO":return I.GEO;case 3:case"GENDER":return I.GENDER;case 4:case"INTEREST":return I.INTEREST;default:return I.UNRECOGNIZED}}(e))):[],legalEntityName:G(e.legalEntityName)?globalThis.String(e.legalEntityName):"",showTailoredAdsSection:G(e.showTailoredAdsSection)?Boolean(e.showTailoredAdsSection):void 0}),toJSON(e){const a={};return e.targetingTypes?.length&&(a.targetingTypes=e.targetingTypes.map((e=>function(e){switch(e){case I.UNKNOWN:return"UNKNOWN";case I.AGE:return"AGE";case I.GEO:return"GEO";case I.GENDER:return"GENDER";case I.INTEREST:return"INTEREST";case I.UNRECOGNIZED:default:return"UNRECOGNIZED"}}(e)))),""!==e.legalEntityName&&(a.legalEntityName=e.legalEntityName),void 0!==e.showTailoredAdsSection&&(a.showTailoredAdsSection=e.showTailoredAdsSection),a},create:e=>S.fromPartial(e??{}),fromPartial(e){const a={targetingTypes:[],legalEntityName:"",showTailoredAdsSection:void 0};return a.targetingTypes=e.targetingTypes?.map((e=>e))||[],a.legalEntityName=e.legalEntityName??"",a.showTailoredAdsSection=e.showTailoredAdsSection??void 0,a}};function G(e){return null!=e}const C="FB2PxTNhkGbwFwYI2ufG",O="gZYgXNWbFSAAjLzGhOI9",Z="eYxzC4s3Nw68RcbK7xzl",M="QrelMvam4WOTMVaO28Rl",k="_EaBFRLKy0nZJXkiRwlx",z="N77hKGzNc_lKQ5OG1EBN",V="JceC3xibcl3MHVULIK0b",B="Uk72m6OFBBdTZ3RJb0K_",D="IFqCps3krPbH25azco3F";const H=({activeTargetingTypes:e})=>{const a=[I.GEO,I.INTEREST].some((a=>e.includes(a)));if(!a)return null;const t=a&&e.some((e=>e===I.AGE||e===I.GENDER));return(0,N.jsx)(j,{title:l.Ru.get("ad-formats.dsa.modal.otherInfo"),showTitle:t,children:(0,N.jsx)(y.b,{className:D,condensedAll:!0,children:e.map((e=>{const a=function(e){switch(e){case I.GEO:return{icon:(0,N.jsx)(f.t,{}),text:l.Ru.get("ad-formats.dsa.modal.targeting.location")};case I.INTEREST:return{icon:(0,N.jsx)(b,{}),text:l.Ru.get("ad-formats.dsa.modal.targeting.interests")};default:return null}}(e);return a?(0,N.jsx)(w,{icon:a.icon,text:a.text},e):null}))})})};function U(e){var a,t,n,i,d,r=e.size?T.$Z[e.size]:e.iconSize,o=(0,T._C)([{size:16,svgContent:"<path d='M9.5 2.4c0 .74-.302 1.207-.75 1.434v1.49h4.5c.966 0 1.75.784 1.75 1.75v1.917c0 .74-.284 1.415-.75 1.92v3.839c0 .69-.56 1.25-1.25 1.25H3c-.69 0-1.25-.56-1.25-1.25v-3.839A2.823 2.823 0 0 1 1 8.991V7.074c0-.966.784-1.75 1.75-1.75h4.5v-1.49C6.802 3.607 6.5 3.14 6.5 2.4c0-.937.809-1.723 1.284-2.184A8.73 8.73 0 0 0 8 0c.057.06.131.133.216.216C8.691.677 9.5 1.463 9.5 2.4Zm-6.25 9.364V14.5h9.5v-2.736c-.188.04-.383.06-.583.06h-.094a2.732 2.732 0 0 1-1.975-.84 2.823 2.823 0 0 1-2.098.93c-.832 0-1.58-.359-2.098-.93-.499.518-1.2.84-1.975.84h-.094c-.2 0-.395-.02-.583-.06Zm6.833-3.43a.75.75 0 0 1 .75.75c0 .685.556 1.24 1.24 1.24h.094c.736 0 1.333-.597 1.333-1.333V7.074a.25.25 0 0 0-.25-.25H2.75a.25.25 0 0 0-.25.25v1.917c0 .736.597 1.333 1.333 1.333h.094a1.24 1.24 0 0 0 1.24-1.24.75.75 0 0 1 .75-.75h.003a.75.75 0 0 1 .75.75 1.33 1.33 0 1 0 2.66 0 .75.75 0 0 1 .75-.75h.003Z'/>"},{size:24,svgContent:"<path d='M13 5.793c.598-.284 1-.868 1-1.793 0-1.17-1.079-2.154-1.711-2.73-.114-.104-.213-.194-.289-.27-.076.076-.175.166-.289.27C11.08 1.846 10 2.83 10 4c0 .925.402 1.509 1 1.793V7.9H5a3 3 0 0 0-2.993 2.8H2v2.4a3.99 3.99 0 0 0 1 2.646V21a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5.254c.622-.705 1-1.632 1-2.646v-2.4h-.007A3 3 0 0 0 19 7.9h-6V5.793ZM5 9.9h14a1 1 0 0 1 1 1v2.2a2 2 0 1 1-4 0V13a1 1 0 0 0-2 0v.1a2 2 0 1 1-4 0V13a1 1 0 0 0-2 0v.1a2 2 0 1 1-4 0v-2.2a1 1 0 0 1 1-1Zm14 7.074V21H5v-4.026a4.006 4.006 0 0 0 4-1.228 3.99 3.99 0 0 0 3 1.354 3.99 3.99 0 0 0 3-1.354 3.99 3.99 0 0 0 4 1.228Z'/>"}],r||24),l=null!==(a=e.autoMirror)&&void 0!==a&&a;return s.createElement(T.In,Object.assign({},e,{autoMirror:l,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((i=e.title,d=e.titleId,i?"<title ".concat(d?'id="'.concat(d,'"'):"",">").concat(i,"</title>"):"")).concat((t=e.desc,n=e.descId,t?"<desc ".concat(n?'id="'.concat(n,'"'):"",">").concat(t,"</desc>"):"")).concat(o.svgContent)}}))}var K=t(82032),L=t(55524),F=t(17808),W=t(45127),J=t(94778),P=t(95425),Y=t(73845);const q=({activeTargetingTypes:e,item:a})=>{const t=(0,W.vh)(),{openURLWithSessionTransfer:s}=(0,Y.L)();return[I.AGE,I.GENDER].some((a=>e.includes(a)))?(0,N.jsxs)(j,{title:l.Ru.get("ad-formats.dsa.modal.profileInfo"),showTitle:!0,children:[(0,N.jsx)(y.b,{className:D,condensedAll:!0,style:{marginBlockEnd:(0,L.po)("base")},children:e.map((e=>{const a=function(e){switch(e){case I.AGE:return{icon:(0,N.jsx)(U,{}),text:l.Ru.get("ad-formats.dsa.modal.targeting.age")};case I.GENDER:return{icon:(0,N.jsx)(K.v,{}),text:l.Ru.get("ad-formats.dsa.modal.targeting.gender")};default:return null}}(e);return a?(0,N.jsx)(w,{icon:a.icon,text:a.text},e):null}))}),(0,N.jsx)(i.E,{variant:"bodyMedium",semanticColor:"textSubdued","aria-label":l.Ru.get("ad-formats.dsa.modal.adRelevancyAction"),children:l.Ru.get("ad-formats.dsa.modal.adRelevancyAction")}),(0,N.jsxs)(F.Y,{component:"button","aria-label":"Edit your Spotify profile, link",className:z,semanticColor:"textBrightAccent",onClick:()=>{s(P.vE),t.send(o({ad_id:a.adId,lineitem_id:a.metadata?.lineitem_id,creative_id:a.metadata?.creative_id,slot:a.slot,event:"event_clicked",reason:"edit_profile",surface:"ad_dsa_view"}))},standalone:!0,children:[(0,N.jsx)(i.E,{variant:"bodyMediumBold",as:"h2",children:l.Ru.get("ad-formats.dsa.modal.editProfile")}),(0,N.jsx)(J.p,{semanticColor:"textBrightAccent"})]})]}):null},Q=({item:e})=>{const a=(0,W.vh)(),{openURLWithSessionTransfer:t}=(0,Y.L)();return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("hr",{className:V}),(0,N.jsx)(i.E,{className:B,variant:"titleSmall","aria-label":l.Ru.get("ad-formats.dsa.modal.aboutTailoredAds"),as:"h2",children:l.Ru.get("ad-formats.dsa.modal.aboutTailoredAds")}),(0,N.jsx)(i.E,{variant:"bodyMedium",semanticColor:"textSubdued","aria-label":l.Ru.get("ad-formats.dsa.modal.tailoredAds"),children:l.Ru.get("ad-formats.dsa.modal.tailoredAds")}),(0,N.jsxs)(F.Y,{component:"button","aria-label":"Visit your privacy settings, link",className:z,semanticColor:"textBrightAccent",onClick:()=>{t(`${P.k$}/#tailored-ads`),a.send(o({ad_id:e.adId,creative_id:e.metadata?.creative_id,event:"event_clicked",lineitem_id:e.metadata?.lineitem_id,reason:"change_preferences",request_id:e.requestId,slot:e.slot,surface:"ad_dsa_view"}))},standalone:!0,children:[(0,N.jsx)(i.E,{variant:"bodyMediumBold",as:"h2",children:l.Ru.get("ad-formats.dsa.modal.privacySetting")}),(0,N.jsx)(J.p,{semanticColor:"textBrightAccent"})]})]})};var X=t(39617);const $=e=>{const[a,t]=(0,s.useState)(null),[n,i]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{e?.metadata?.lineitem_id&&e.adId&&(async e=>{try{i(!0);const a=await X.ZY(e);t(S.fromJSON(a)),i(!1)}catch(e){i(!1)}})({lineitemId:e.metadata.lineitem_id,adId:e.adId})}),[e]),{data:a,loading:n}};var ee=t(80882);const ae=({item:e})=>{const a=(0,W.vh)(),t=(0,n.wA)(),{isOpen:m}=(0,n.d4)((e=>e.ui.dsaDialog)),{data:u,loading:h}=$(e);return(0,s.useEffect)((()=>{a.send(o({ad_id:e.adId,creative_id:e.metadata?.creative_id,event:"event_viewed",lineitem_id:e.metadata?.lineitem_id,reason:"ad_dsa_view",request_id:e.requestId,slot:e.slot,surface:"ad_dsa_view"}))}),[]),(0,N.jsxs)(ee.A,{className:C,isOpen:m,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,contentLabel:l.Ru.get("ad-formats.dsa.aboutThisAd"),children:[(0,N.jsx)("div",{className:Z,children:(0,N.jsx)(i.E,{"aria-label":l.Ru.get("ad-formats.dsa.aboutThisAd"),variant:"titleMedium",as:"h1",children:l.Ru.get("ad-formats.dsa.aboutThisAd")})}),(0,N.jsx)("hr",{className:V}),(0,N.jsx)("div",{className:O,children:h?(0,N.jsx)("div",{className:M,"data-testid":"loading-indicator",children:(0,N.jsx)(d.U,{size:"large"})}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(x,{advertiser:e.metadata.advertiser,legalEntityName:u?.legalEntityName}),u?.targetingTypes.length?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i.E,{className:B,variant:"titleSmall",as:"h2","aria-label":l.Ru.get("ad-formats.dsa.modal.adBasedInfoExplanation"),children:l.Ru.get("ad-formats.dsa.modal.adBasedInfoExplanation")}),(0,N.jsx)(q,{item:e,activeTargetingTypes:u?.targetingTypes}),(0,N.jsx)(H,{item:e,activeTargetingTypes:u?.targetingTypes})]}):(0,N.jsx)(i.E,{className:B,as:"h2","aria-label":l.Ru.get("ad-formats.dsa.modal.targeting.unknown"),tabIndex:0,children:l.Ru.get("ad-formats.dsa.modal.targeting.unknown")}),u?.showTailoredAdsSection&&(0,N.jsx)(Q,{item:e})]})}),(0,N.jsx)("button",{"aria-label":l.Ru.get("close_button_action"),className:k,onClick:()=>{t((0,c.ft)())},children:(0,N.jsx)(r.M,{size:"medium",semanticColor:"textBase"})})]})}}}]);
//# sourceMappingURL=7294.js.map