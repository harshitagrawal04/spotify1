"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[42],{8104:(t,e,i)=>{i.d(e,{f:()=>s});const n="music",o="0.1.0",a="default",r="14.11.0";function s(t){return new l(t)}class l{constructor(t){this._path=[{name:"desktop-blend-invitation"}],t?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=t.parentAbsoluteLocation)}inviteButtonFactory(){return new l.InviteButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}joinButtonFactory(){return new l.JoinButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[a,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[o,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}}!function(t){t.InviteButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:i}){this._path=t.concat({name:"invite_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[a,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[o,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitCopyToClipboard(){return{actionName:"copy_to_clipboard",actionVersion:1,app:n,generatorVersion:r,interactionType:"hit",specificationMode:a,specificationVersion:o,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}impression(){return{app:n,generatorVersion:r,specificationVersion:o,specificationMode:a,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(l||(l={})),function(t){t.JoinButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:i}){this._path=t.concat({name:"join_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[a,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[o,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitCreatePlaylist(){return{actionName:"create_playlist",actionVersion:1,app:n,generatorVersion:r,interactionType:"hit",specificationMode:a,specificationVersion:o,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}impression(){return{app:n,generatorVersion:r,specificationVersion:o,specificationMode:a,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(l||(l={}))},11844:(t,e,i)=>{i.r(e),i.d(e,{default:()=>_});var n=i(30758),o=i(62411),a=i(8104),r=i(79252),s=i(11936),l=i(22397),c=i(83294),d=i(38742),u=i(97952),h=i(85624),p=i(94705),b=i(33782),m=i(3161),g=i(80491),x=i(61828),E=i(86070);const v={page_type:d.pd.PENDING_INVITATION,get title(){return r.Ru.get("web-player.blend.group-invite.header")},get subtitle(){return r.Ru.get("web-player.blend.duo-invite.description")},get button_text(){return r.Ru.get("web-player.blend.invite.button-title")},footnote:null,members:[],recipient:null,members_title:null,playlist_uri:null},_=()=>{const{spec:t,logger:e}=(0,m.r)(a.f,{}),i=(0,h.y)(t,e),{ref:d,breakpoint:_}=(0,u.G)(),{user:A}=(0,o.d4)(p.Ht),y=A?.uri?(0,g.v)(A?.uri):"",f=(t=>({...v,members:[t],footnote:r.Ru.get("web-player.blend.group-invite.warning")}))({name:A?.display_name||"",username:y,image_url:(0,x.g)(A?.images)?.url||null,hash:""});return A?(0,E.jsxs)(n.Suspense,{fallback:null,children:[(0,E.jsx)(s.Q,{children:r.Ru.get("web-player.blend.invite.page-title")}),(0,E.jsx)(b.o.Provider,{value:_,children:(0,E.jsx)(l.d,{invitation:f,callToActionClicked:i,breakpointEltRef:d})})]}):(0,E.jsx)(c.A,{})}},16263:(t,e,i)=>{i.r(e),i.d(e,{default:()=>K});var n=i(30758),o=i(62411),a=i(85387),r=i(20776),s=i(33100),l=i(8104),c=i(45005),d=i(79252),u=i(30618),h=i(51365),p=i(41287),b=i(46752),m=i(84242),g=i(86070);const x=({invitation:t,callToActionClicked:e,breakpointEltRef:i})=>(0,g.jsxs)("div",{className:m.A.container,"data-testid":b.rg,ref:i,children:[(0,g.jsx)(h.u,{size:"xxlarge"}),(0,g.jsx)(p.O,{title:t.title,subtitle:t.subtitle,buttonText:t.button_text,footnote:null,callToActionClicked:e})]});var E=i(11936),v=i(97500),_=i.n(v),A=i(44004),y=i(43453),f=i(47290),L=i(82221),j=i(58206);const w="HKAYWYmxd5Ie8WSi0a4y",R="i52u_T3b50wraodIaORk",N="xakiNVMlUf6geF67FEgy",I="IRhTesoeIiwswlly0Dvg",T="LNJzE17iskXWmfKAzY4U",C="qzBr7X7cdLUhWdk0r8lL",k=({uri:t,imageUrl:e,name:i})=>(0,g.jsx)("li",{children:(0,g.jsx)(f.h,{menu:(0,g.jsx)(L.B,{uri:t}),children:(0,g.jsx)(j.N,{to:t,children:(0,g.jsxs)("div",{className:I,children:[(0,g.jsx)(y.e,{images:[{url:e,width:null,height:null}],label:i,width:32,userIconSize:"medium",className:T}),(0,g.jsx)(A.E,{variant:"bodySmallBold",className:"standalone-ellipsis-one-line",semanticColor:"textBase",children:i})]})})})}),M=({members:t,headingText:e,className:i})=>(0,g.jsxs)("div",{className:_()(w,i),children:[(0,g.jsx)("div",{children:(0,g.jsx)(A.E,{as:"h4",variant:"marginalBold",semanticColor:"textSubdued",className:R,children:e})}),(0,g.jsx)("ul",{className:N,children:t&&t.map((t=>(0,g.jsx)(k,{imageUrl:t.image_url||"",name:t.name,uri:(0,c.Qjr)(t.username).toURI()},t.username)))}),(0,g.jsx)("div",{className:C})]}),D=({invitation:t,callToActionClicked:e,breakpointEltRef:i})=>{const n=t.members||[],o=(0,g.jsx)("div",{className:m.A.userListContainer,"data-testid":b.ev,children:(0,g.jsx)(M,{className:m.A.userList,headingText:t.members_title,members:n})});return(0,g.jsxs)("div",{className:m.A.container,ref:i,children:[(0,g.jsx)(E.Q,{children:d.Ru.get("blend.join.title")}),(0,g.jsx)(p.O,{title:t.title,subtitle:t.subtitle,footnote:t.footnote,body:o,buttonText:t.button_text,callToActionClicked:e})]})};var O=i(22397),V=i(38742),S=i(97952),B=i(85624),P=i(35953),Y=i(33924),U=i(64770);var G=i(17145),J=i(33782),F=i(29947),z=i(3161);const X=({invitationId:t})=>{const e=(0,Y.g)(),i=(0,s.NC)(G.CXJ),{data:o,error:a,loading:h}=(0,F.Z)(V.YW,[t]),{spec:E,logger:v}=(0,z.r)(l.f,{}),_=(0,B.y)(E,v),A=function(t,e,i){const{enqueueSnackbar:n}=(0,P.d)(),o=(0,U.A)(),a=(0,Y.g)();return async()=>{try{const e=await(0,V.OE)(o,t),i=(0,c.o_h)(e?.body.playlist_uri).toURLPath(!0);if(!i)throw new Error("unable to join");a(i,{replace:!0})}catch{n(d.Ru.get("error.request-playlist-failure"))}if(e&&i){const t=e.joinButtonFactory().hitCreatePlaylist();i.logInteraction(t)}}}(t,E,v),{ref:y,breakpoint:f}=(0,S.G)();(0,n.useEffect)((()=>{if(o?.body?.page_type===V.pd.ALREADY_JOINED){const t=(0,c.o_h)(o?.body.playlist_uri)?.toURLPath(!0);t&&e(t,{replace:!0})}}),[o?.body?.page_type,o?.body?.playlist_uri,e]);const L=null===o||!o.body;if(L||h||a)return(0,g.jsx)(u.LoadingPage,{timeoutInMs:1e3,hasError:!!a||!h&&L,errorMessage:d.Ru.get("error.generic")});const j=o?.body.members?.length||0,w=i===G.YVK.TWO_USER;switch(o?.body.page_type){case V.pd.DELETED:return(0,g.jsx)(J.o.Provider,{value:f,children:(0,g.jsxs)("div",{className:m.A.container,ref:y,"data-testid":b.VE,children:[(0,g.jsx)(r.x,{size:"xxlarge"}),(0,g.jsx)(p.O,{title:o.body.title,subtitle:o.body.subtitle,buttonText:o.body.button_text,footnote:o.body.footnote,callToActionClicked:_})]})});case V.pd.ALREADY_JOINED:return(0,g.jsx)(u.LoadingPage,{hasError:!1,errorMessage:d.Ru.get("error.request-playlist-failure")});case V.pd.READY_TO_JOIN_EMPTY_BLEND:return(0,g.jsx)(J.o.Provider,{value:f,children:(0,g.jsx)(O.d,{invitation:o.body,breakpointEltRef:y,callToActionClicked:A})});case V.pd.READY_TO_JOIN_ALREADY_CREATED_BLEND:return w&&j>=2?(0,g.jsx)(J.o.Provider,{value:f,children:(0,g.jsx)(x,{invitation:{...o.body,title:d.Ru.get("blend.link-invialid.header"),subtitle:d.Ru.get("blend.link-invalid.subtitle"),button_text:d.Ru.get("blend.invite.button-title")},callToActionClicked:_,breakpointEltRef:y})}):(0,g.jsx)(J.o.Provider,{value:f,children:(0,g.jsx)(D,{invitation:o.body,callToActionClicked:A,breakpointEltRef:y})});case V.pd.MAX_MEMBERS:return(0,g.jsx)(J.o.Provider,{value:f,children:(0,g.jsx)(x,{invitation:o.body,callToActionClicked:_,breakpointEltRef:y})});case V.pd.PENDING_INVITATION:return(0,g.jsx)(J.o.Provider,{value:f,children:(0,g.jsx)(O.d,{invitation:o.body,callToActionClicked:_,breakpointEltRef:y})});default:return(0,g.jsx)(u.LoadingPage,{timeoutInMs:1e3,hasError:!0,errorMessage:d.Ru.get("error.generic")})}};var W=i(83294),q=i(94705);const H=({invitationId:t})=>{const{user:e}=(0,o.d4)(q.Ht);return e?(0,g.jsx)(n.Suspense,{fallback:null,children:(0,g.jsx)(X,{invitationId:t})}):(0,g.jsx)(W.A,{})},K=(0,n.memo)((()=>{const{invitationId:t=""}=(0,a.g)();return(0,g.jsx)(H,{invitationId:t})}))},22397:(t,e,i)=>{i.d(e,{d:()=>_});var n=i(97500),o=i.n(n),a=i(79252),r=i(43453),s=i(11936),l=i(41287),c=i(46752);const d="gJmoZouW_m4rUBRFHmu7",u="r4j9hiYJ8q0SQpEsgvSh";var h=i(86070);const p=t=>(0,h.jsx)("div",{className:d,children:(0,h.jsx)("div",{className:u,children:(0,h.jsx)("svg",{width:t.iconSize,height:t.iconSize,fill:"currentColor",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)("path",{d:"M33 31.998v-23h-2v23H8v2h23v23h2v-23h23v-2z"})})})});var b=i(52748),m=i(33782),g=i(84242);const x={name:"",username:"",image_url:null,hash:""},E={[b.E.MEDIUM]:164,[b.E.LARGE]:164,[b.E.XLARGE]:270},v=(t,e)=>(0,h.jsx)(r.e,{label:a.Ru.get("web-player.blend.invite.button-title"),images:[],width:t,userIconSize:"xxlarge",customPlaceholder:(0,h.jsx)(p,{iconSize:e}),piled:!0}),_=({invitation:t,callToActionClicked:e,breakpointEltRef:i})=>{const n=!!t.members?.length,d=n&&t.members?.[0]||t.recipient||x,u=n&&t.recipient||null,p=(0,m.y)(),b=p&&E[p]||128,_=Math.round(.475*b);return(0,h.jsxs)("div",{className:o()(g.A.container,g.A.TwoUsers),"data-testid":c.xg,ref:i,children:[(0,h.jsx)(s.Q,{children:a.Ru.get("blend.invite.page-title")}),(0,h.jsxs)("div",{className:g.A.facepile,children:[(0,h.jsx)(r.e,{label:d.name,images:[{url:d.image_url??"",width:b,height:b}],width:b,userIconSize:"xxlarge"}),u?(0,h.jsx)(r.e,{label:u.name,images:[{url:u.image_url??"",width:b,height:b}],width:b,userIconSize:"xxlarge",piled:!0}):v(b,_)]}),(0,h.jsx)(l.O,{title:t.title,subtitle:t.subtitle,footnote:t.footnote,buttonText:t.button_text,callToActionClicked:e})]})}},38742:(t,e,i)=>{i.d(e,{B6:()=>s,OE:()=>r,YW:()=>a,pd:()=>o});var n=i(81907);let o=function(t){return t.PENDING_INVITATION="PENDING_INVITATION",t.READY_TO_JOIN_EMPTY_BLEND="READY_TO_JOIN_EMPTY_BLEND",t.READY_TO_JOIN_ALREADY_CREATED_BLEND="READY_TO_JOIN_ALREADY_CREATED_BLEND",t.MAX_MEMBERS="MAX_MEMBERS",t.ALREADY_JOINED="ALREADY_JOINED",t.DELETED="DELETED",t}({});const a=(t,e)=>t.build().withHost(n.t2).withPath(`/v3/view-invitation/${encodeURIComponent(e)}`).withEndpointIdentifier("v3/view-invitation/{invitationId}").withLocale(t.locale).send(),r=(t,e)=>t.build().withHost(n.t2).withMethod("PUT").withPath(`/v2/join/${encodeURIComponent(e)}`).withEndpointIdentifier("join/{invitationId}").send(),s=t=>t.build().withHost(n.t2).withMethod("POST").withPath("/v1/generate").withEndpointIdentifier("v1/generate").send()},41287:(t,e,i)=>{i.d(e,{O:()=>p});var n=i(44004),o=i(88019),a=i(46752),r=i(52748),s=i(33782),l=i(84242),c=i(86070);const d={[r.E.MEDIUM]:"titleMedium",[r.E.LARGE]:"titleMedium",[r.E.XLARGE]:"headlineMedium"},u={[r.E.LARGE]:"bodyMedium",[r.E.XLARGE]:"bodyMediumBold"},h={[r.E.LARGE]:"bodySmall",[r.E.XLARGE]:"bodySmall"},p=({title:t,subtitle:e,body:i,footnote:r,buttonText:p,callToActionClicked:b})=>{const m=(0,s.y)(),g=m&&d[m]||"titleSmall",x=m&&u[m]||"bodySmall",E=m&&h[m]||"marginal";return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.E,{as:"h1",variant:g,semanticColor:"textBase",className:l.A.title,children:t}),(0,c.jsx)(n.E,{as:"h2",variant:x,semanticColor:"textSubdued",className:l.A.subtitle,children:e}),i,b&&(0,c.jsx)(o.$,{className:l.A.button,colorSet:"invertedLight",onClick:b,"data-testid":a.OL,children:p}),r&&(0,c.jsx)(n.E,{as:"p",variant:E,semanticColor:"textSubdued",className:l.A.note,children:r})]})}},46752:(t,e,i)=>{i.d(e,{OL:()=>s,VE:()=>n,ev:()=>a,rg:()=>r,xg:()=>o});const n="blend-deleted-container",o="blend-two-user-container",a="blend-multi-user-container",r="blend-full-container",s="blend-cta-button"},83294:(t,e,i)=>{i.d(e,{A:()=>n});const n=()=>{const t=window.location.href;return window.location.href=`https://accounts.spotify.com/login?continue=${encodeURIComponent(t)}`,null}},84242:(t,e,i)=>{i.d(e,{A:()=>n});const n={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",container:"yMoj4jXSudxZ6BkKxV2E",TwoUsers:"IDgUCqAbkRah6OFywv1q",subtitle:"qmKxO5qV4XmVYfpFpaDA",facepile:"nWMdWl40O8K7HQT8Tagc",title:"csRAeNipsu1camQTMiIU",button:"nxFBywAeAI8Zk2fav3Yj",userList:"lxPLQIPb1VSV3VL18Ke3",userListContainer:"BzMKhmywgyIt6IUjcTGW",note:"DSdKNusLgsMX_iicYCU2"}},85624:(t,e,i)=>{i.d(e,{y:()=>u});var n=i(30758),o=i(48237),a=i(62411),r=i(79252),s=i(38742),l=i(94705),c=i(64770),d=i(63710);function u(t,e){const{user:i}=(0,a.d4)(l.Ht),{enqueueSnackbar:u}=(0,o.dh)(),h=(0,c.A)(),p=(0,n.useCallback)((async()=>{const t=await(0,s.B6)(h),e=t.body?.invite;if(!e)throw new Error("unable to generate invite link");return i?.display_name?r.Ru.get("blend.invite.body-with-name",i.display_name,t.body?.invite):r.Ru.get("blend.invite.body-without-name",t.body?.invite)}),[i?.display_name,h]);return async()=>{try{await(0,d.l)(p()),u(r.Ru.get("feedback.link-copied"))}catch{u(r.Ru.get("error.generic"))}if(t&&e){const i=t.inviteButtonFactory().hitCopyToClipboard();e.logInteraction(i)}}}},97952:(t,e,i)=>{i.d(e,{G:()=>a});var n=i(52748),o=i(62363);const a=()=>(0,o.x)({[n.E.SMALL]:536,[n.E.MEDIUM]:792,[n.E.LARGE]:1048,[n.E.XLARGE]:1688})}}]);
//# sourceMappingURL=xpui-routes-blend.js.map