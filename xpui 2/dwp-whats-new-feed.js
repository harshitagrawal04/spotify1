"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[4084],{1537:(e,t,a)=>{a.d(t,{WhatsNewFeed:()=>dt});var i=a(30758),s=a(3528),n=a(97500),l=a.n(n),r=a(44004),o=a(83793),c=a(25957),d=a(79252),u=a(10126),m=a(45127),p=a(26022),h=a(83348),g=a(15845);const x="q5riNmaoksSuEEvQAurA";var y=a(86070);const v=[{id:"ALBUM",getName:()=>d.Ru.get("web-player.whats-new-feed.filters.music"),ubiId:"Music"},{id:"EPISODE",getName:()=>d.Ru.get("web-player.whats-new-feed.filters.episodes"),ubiId:"Podcast & Shows"},{id:"WHATS_NEW_FEED_NOTIFICATION",getName:()=>d.Ru.get("web-player.whats-new-feed.filters.notifications"),ubiId:"Merch & Events"}],b=(0,i.memo)((function({availableFilters:e,selectedFilters:t,toggleFilterId:a,resetFilterIds:s,className:n,spec:l}){const r=d.Ru.get("web-player.whats-new-feed.filters.options"),o=(0,g.s)(),c=(0,i.useMemo)((()=>{const t=new Map;return(e||[]).forEach((e=>{t.set(e.id,e)})),t}),[e]),u=(0,i.useCallback)(((e,t,a)=>{let i;if(!e)return i=l.clearFiltersFactory().hitClearFilter(),void o.logInteraction(i);const s=c.get(e);if(!s)return;const n=l.filterChipFactory({identifier:s.ubiId,position:a});i=t?n.hitClearFilter():n.hitFilter(),o.logInteraction(i)}),[l,o,c]);return(0,y.jsx)("div",{className:x,children:(0,y.jsx)(h.s,{placeholderFilters:v,availableFilters:e,selectedFilters:t,toggleFilterId:a,onFilterClick:u,resetFilterIds:s,ariaLabel:r,className:n})})}));var f=a(86459),w=a(73849),j=a(94477),N=a(17971),k=a(62108),C=a(23115),I=a(28823),E=a(76540),F=a(90298),S=a(47290),R=a(29083),P=a(76434);const B="UzbVbHOHQ3xdlESl06nb",M=({dateAdded:e,prefix:t})=>{let a=e.getTime()>0&&d.Ru.formatRelativeDate(e,{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"});return a&&t&&(a=`${t} ${a}`),(0,y.jsx)(r.E,{variant:"bodySmall",className:B,children:a})};var L=a(58206),A=a(46412),U=a(52748);const _=e=>{switch(e){case U.E.LARGE:return A.Qe.SIZE_112;case U.E.MEDIUM:default:return A.Qe.SIZE_64}};var T=a(60237),D=a(17998),z=a(6526),V=a(49244),O=a(68538),G=a(33782),H=a(19792),W=a(23422),Y=a(69078),X=a(15727),Z=a(24848),q=a(16859),K=a(1263),Q=a(34447);const J="SjhDNg4bQRQmIJAba47Z",$="eYvk_xcxVNMwCBkfY3O0",ee="TtoLzgGMAU9nkxMbixq9",te="Rw7qIj58PeAz8p6dejOP",ae="uzhTSuCH_4ojaqifMJRB",ie="D71yL9GnHIYg7PheYlz8",se="KKRyrr7NUJy1VBWydHHH",ne="kAYwHqwZ7agHEAGbYN3v",le="XaingSntLq8c8wEfqf81",re="FDm94lE0xkDYtA1Bk7Jc",oe="TPNGFuTvzNVNHisumnhg";function ce({album:e,onLike:t,onMoreButtonClick:a,onDownloadClick:s,spec:n}){const o=(0,i.useRef)(null);(0,V.p)(o);const c=(0,G.y)(),u=c===U.E.LARGE,{draggable:m,onDragStart:p}=(0,D.P)({itemUris:[e.uri],dragLabelText:e.name});let h;e.date&&(h=(0,y.jsx)(M,{dateAdded:new Date(e.date.isoString)}));const[x,v]=(0,H.A)(e.uri),b=e.artists?.items.map((e=>e.profile.name)).join(d.Ru.getSeparator())||"",B=(0,g.s)(),A=(0,i.useCallback)((async()=>{try{await v(!x)}catch{}}),[x,v]),{togglePlay:ce,isPlaying:de,isActive:ue}=(0,Z.P)({uri:e.uri},{featureIdentifier:"whats_new_panel",referrerIdentifier:"whats_new_panel"}),me=(0,i.useCallback)((t=>{let a;t.preventDefault(),ue&&!de&&(a=n.playButtonFactory().hitResume({itemToBeResumed:e.uri})),de||ue||(a=n.playButtonFactory().hitPlay({itemToBePlayed:e.uri})),de&&(a=n.playButtonFactory().hitPause({itemToBePaused:e.uri})),a&&B.logInteraction(a),ce()}),[ce,ue,de,B,n,e.uri]),pe=(0,z.V)(e.uri),he=(0,Y.T)(e.uri),ge=(0,i.useCallback)((()=>{const t=n.hitUiNavigate({destination:e.uri});B.logInteraction(t),pe()}),[e.uri,n,B,pe]),xe=(0,i.useCallback)((a=>{const i=n.saveButtonFactory().hitLike({itemToBeLiked:e.uri}),s=n.saveButtonFactory().hitRemoveLike({itemNoLongerLiked:e.uri});B.logInteraction(a?i:s),t?.(a)}),[n,B,e.uri,t]),ye=(0,i.useCallback)(((t,a)=>{let i;a===X.NV.ADD?i=n.downloadButtonFactory().hitDownload({itemToDownload:e.uri}):a===X.NV.REMOVE?i=n.downloadButtonFactory().hitUiReveal():a!==X.NV.NO_PERMISSION&&a!==X.NV.NO_CAPABILITY||(i=n.downloadButtonFactory().hitUiReveal()),i&&B.logInteraction(i),s?.(t,a)}),[e.uri,B,n,s]),ve=(0,i.useCallback)((e=>{a?.(e)}),[a]),be=(0,i.useCallback)((()=>{const t=n.titleFactory().hitUiNavigate({destination:e.uri});B.logInteraction(t)}),[e.uri,B,n]),fe=d.Ru.get("tracklist.a11y.play",e.name,b),we=d.Ru.get("tracklist.a11y.pause",e.name,b),je=(0,y.jsx)(f.d,{lineClamp:1,children:(0,y.jsx)(L.N,{to:e.uri,onClick:be,children:e.name})}),Ne=e.artists?e.artists.items.map(((e,t,a)=>{return(0,y.jsxs)(i.Fragment,{children:[(0,y.jsx)(S.h,{menu:(0,y.jsx)(P.t,{uri:e.uri}),children:(0,y.jsx)(L.N,{to:e.uri,className:ae,onClick:(s=e.uri,()=>{const e=n.subtitleFactory().hitUiNavigate({destination:s});B.logInteraction(e)}),children:e.profile.name})}),t<a.length-1&&d.Ru.getSeparator()]},t);var s})):"",ke=(0,y.jsx)("div",{className:ie,children:(0,y.jsx)(O.b,{className:l()(se,{[ne]:u}),type:K.c.ALBUM,size:_(c),title:e.name,images:e.coverArt?.sources})}),Ce=(0,y.jsxs)(r.E,{className:re,children:[(0,Q.C)(e.albumType),(0,y.jsx)("span",{className:oe,children:h})]}),Ie=u?k.t.sm:k.t.xs,Ee=(0,y.jsxs)("div",{className:le,children:[(0,y.jsxs)("div",{className:$,children:[(0,y.jsx)(E.b,{onClick:xe,uri:e.uri,size:Ie,className:ee}),(0,y.jsx)(C.f,{onClick:ye,className:l()({[ee]:(0,W.X)(he)}),uri:e.uri,isFollowing:x,onFollow:A,size:Ie,condensed:!0}),(0,y.jsx)(q.r,{spec:n,children:(0,y.jsx)(F.b,{menu:(0,y.jsx)(R.h,{uri:e.uri}),children:(0,y.jsx)(I.e,{onClick:ve,size:Ie})})})]}),(0,y.jsx)("div",{className:te,children:(0,y.jsx)(T.R,{size:"small",onClick:me,isPlaying:de,ariaPlayLabel:fe,ariaPauseLabel:we,version:T.H.secondary})})]});return(0,y.jsx)(S.h,{menu:(0,y.jsx)(R.h,{uri:e.uri}),children:(0,y.jsx)("div",{draggable:m,onDragStart:p,children:(0,y.jsx)(w.v,{size:"xxl",ref:o,className:J,media:ke,title:je,subtitle:(0,y.jsx)(j.j,{lineClamp:1,children:Ne}),id:e.uri,variant:"naked",body:Ce,footer:Ee,onClick:ge,hoverBackgroundColor:"backgroundHighlight",layout:u?"wide":"regular",horizontalGap:u?N.lT:N.CJ,verticalGap:N.v4,paddingBlockStart:"16px",paddingBlockEnd:"16px"})})})}var de=a(53567),ue=a(51763),me=a(24313),pe=a(27149),he=a(27649),ge=a(25710),xe=a(13297),ye=a(62935),ve=a(86517);const be="N3zMh5FMdbBKUvz4uDfe",fe="h0YQcDKdGmWssZyuIcvq",we="lMQrLkJVNqZAzT95gQnA";function je({episode:e,isPlaying:t,isActive:a,isFullyPlayed:s,setIsFullyPlayed:n}){let l;e.release.isoString&&(l=(0,y.jsx)(M,{dateAdded:new Date(e.release.isoString)}));const o=(0,i.useRef)(null),[c]=(0,ye.S)(1e4,(t=>t?.item?.uri===e.uri));(0,i.useEffect)((()=>{t&&(o.current=c)}),[t,c]),(0,i.useEffect)((()=>{!t&&o.current&&e.duration.milliseconds<=o.current&&n(!0)}),[t,e.duration.milliseconds,n]);const u=(0,i.useRef)(e.duration.milliseconds-e.playedState.timeLeft.milliseconds),m=(0,y.jsx)(ve.j,{isPlaying:t,fullyPlayed:s,durationMs:e.duration.milliseconds,resumePositionMs:o.current||u.current,position:a?c:void 0,className:fe});return(0,y.jsxs)("div",{className:be,children:[(0,y.jsx)(xe.P,{episode:e}),(0,y.jsx)(r.E,{variant:"bodySmall",children:d.Ru.get("card.tag.episode")}),(0,y.jsx)("span",{className:we}),l,(0,y.jsx)("span",{className:we}),m]})}var Ne=a(89151);const ke="IEDOUN3mwwZhHVziC03a",Ce="Olh4d9g46wryDMTzRRmw",Ie="zyDT2CX7tvGjKxxUnO7D",Ee="TKntS5R19vVI3J9xxwDL",Fe="IoTOUob09_0_3kC8ORbu",Se="aKVUno8YrkyvGsg7iS59",Re="iF91evq0EtvlgCxIRI_6",Pe="VzSICihKBYcgMsSFv8SH",Be="iOxe1erWkyDFY3p4NG8x",Me="_72TrTBKZHea2vJ2I2BJX";function Le({episode:e,podcastName:t,podcastUri:a,onLike:s,onMoreButtonClick:n,onDownloadClick:o,spec:c,featureIdentifier:u,referrerIdentifier:m,size:p="xxl"}){const h=(0,i.useRef)(null);(0,V.p)(h);const x=(0,G.y)(),v=(0,Y.T)(e.uri),b=x===U.E.LARGE,{draggable:k,onDragStart:C}=(0,D.P)({itemUris:[e.uri],dragLabelText:`${e.name} â€¢ ${t}`}),I=(0,g.s)(),{togglePlay:E,isPlaying:R,isActive:P}=(0,Z.P)({uri:e.uri},{featureIdentifier:u,referrerIdentifier:m}),[B,M]=(0,i.useState)(e.playedState.state===Ne.M.Completed),A=(0,z.V)(e.uri),H=d.Ru.get("tracklist.a11y.play",e.name,t),Q=d.Ru.get("tracklist.a11y.pause",e.name,t),J=(0,i.useCallback)((()=>{const t=c.hitUiNavigate({destination:e.uri});I.logInteraction(t),A()}),[A,I,c,e.uri]),$=(0,i.useCallback)((t=>{const a=c.saveButtonFactory().hitLike({itemToBeLiked:e.uri}),i=c.saveButtonFactory().hitRemoveLike({itemNoLongerLiked:e.uri});I.logInteraction(t?a:i),s?.(t)}),[c,I,e.uri,s]),ee=(0,i.useCallback)(((t,a)=>{let i;a===X.NV.ADD?i=c.downloadButtonFactory().hitDownload({itemToDownload:e.uri}):a===X.NV.REMOVE?i=c.downloadButtonFactory().hitUiReveal():a!==X.NV.NO_PERMISSION&&a!==X.NV.NO_CAPABILITY||(i=c.downloadButtonFactory().hitUiReveal()),i&&I.logInteraction(i),o?.(t,a)}),[I,c,e.uri,o]),te=(0,i.useCallback)((()=>{const t=c.titleFactory().hitUiNavigate({destination:e.uri});I.logInteraction(t)}),[I,c,e.uri]),ae=(0,i.useCallback)((t=>{let a;t.preventDefault(),P&&!R&&(a=c.playButtonFactory().hitResume({itemToBeResumed:e.uri})),R||P||(a=c.playButtonFactory().hitPlay({itemToBePlayed:e.uri})),R&&(a=c.playButtonFactory().hitPause({itemToBePaused:e.uri})),a&&I.logInteraction(a),E()}),[E,I,c,e.uri,R,P]),ie=(0,i.useCallback)((e=>{n?.(e)}),[n]),se=(0,y.jsx)(f.d,{lineClamp:2,children:(0,y.jsx)(L.N,{to:e.uri,onClick:te,children:e.name})}),ne=(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(j.j,{lineClamp:1,paddingBottom:b?"8px":void 0,children:(0,y.jsx)(S.h,{menu:(0,y.jsx)(ge.H,{uri:a}),children:(0,y.jsx)(L.N,{to:a,className:Se,onClick:(le=a,()=>{const e=c.subtitleFactory().hitUiNavigate({destination:le});I.logInteraction(e)}),children:(0,y.jsx)(r.E,{as:"span",variant:"bodySmall",children:t})})})})});var le;const re=(0,y.jsx)("div",{className:Re,children:(0,y.jsx)(O.b,{className:l()(Pe,{[Be]:b}),type:K.c.EPISODE,size:_(x),title:e.name,images:e.images})}),oe=b?"medium":"small",ce=e.podcastSubscription,xe=ce.isPaywalled&&!ce.isUserSubscribed,ye=!xe,ve=(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(je,{episode:e,isPlaying:R,isActive:P,isFullyPlayed:B,setIsFullyPlayed:M}),(0,y.jsxs)("div",{className:Me,children:[(0,y.jsxs)("div",{className:Ce,children:[(0,y.jsx)(pe.b,{onClick:$,uri:e.uri,size:oe,className:Ie,condensed:!0}),(0,y.jsx)(ue.e,{className:l()({[Ie]:(0,W.X)(v)}),onClick:ee,uri:e.uri,size:oe,canDownload:ye,condensed:!0}),(0,y.jsx)(q.r,{spec:c,children:(0,y.jsx)(F.b,{menu:(0,y.jsx)(he.b,{uri:e.uri,onMarkAsPlayed:M,isPlayed:B}),children:(0,y.jsx)(me.e,{onClick:ie,size:oe})})})]}),(0,y.jsx)("div",{className:Ee,children:(0,y.jsx)(T.R,{"aria-label":"whats-new-feed-play-button",size:"small",onClick:ae,isPlaying:R,ariaPlayLabel:H,ariaPauseLabel:Q,version:T.H.secondary,disabled:!e.isPlayable,locked:xe})})]})]}),be=(0,y.jsx)(de.v,{lineClamp:2,paddingBottom:b?"4px":void 0,className:Fe,children:(0,y.jsx)(r.E,{as:"span",variant:"bodySmall",children:e.description})});return(0,y.jsx)(S.h,{menu:(0,y.jsx)(he.b,{uri:e.uri,onMarkAsPlayed:M,isPlayed:B}),children:(0,y.jsx)("div",{draggable:k,onDragStart:C,children:(0,y.jsx)(w.v,{size:p,ref:h,className:ke,media:re,title:se,subtitle:ne,id:e.uri,variant:"naked",body:be,footer:ve,onClick:J,hoverBackgroundColor:"backgroundHighlight",layout:b?"wide":"regular",horizontalGap:b?N.lT:N.CJ,verticalGap:N.v4,paddingBlockStart:"16px",paddingBlockEnd:"16px"})})})}var Ae=a(25971),Ue=a(84785),_e=a(3445),Te=a(29731),De=a(99023);function ze({item:e,spec:t}){if("AlbumResponseWrapper"===e.content.__typename){const a=e.content.data;if("Album"===a.__typename)return(0,y.jsx)(ce,{album:a,spec:t})}if("EpisodeOrChapterResponseWrapper"===e.content.__typename){const i=e.content.data;if("Chapter"===i.__typename)return(0,y.jsx)(y.Fragment,{});if("Episode"===i.__typename){let e="",s="";return"Podcast"===i.podcastV2.data.__typename&&(e=i.podcastV2.data.name,s=i.podcastV2.data.uri),(0,y.jsx)(Le,{episode:(a=i,{type:K.c.EPISODE,uri:a.uri,name:a.name,description:a.description??"",duration:{milliseconds:a.duration.totalMilliseconds},playedState:(0,Te.fS)(a.duration,a.playedState),images:a.coverArt?.sources.map(De.m)??[],languages:a.language?[a.language.code]:[],release:(0,_e.mp)(a.releaseDate),show:"Podcast"===a.podcastV2.data.__typename?(0,Te.jM)(a.podcastV2.data):null,podcastSubscription:(0,Te.Wx)(a.restrictions,a.playability),gatedEntityRelations:(0,Ae.Gv)(a.gatedEntityRelations),isPlayable:a.playability.playable,isExplicit:a.contentRating?.label===Ue.x7.Explicit,is19PlusOnly:a.contentRating?.label===Ue.x7.NineteenPlus}),podcastName:e,podcastUri:s,spec:t,referrerIdentifier:"whats_new_panel",featureIdentifier:"whats_new_panel"})}}var a;return(0,y.jsx)(y.Fragment,{})}var Ve=a(91975);const Oe="PNAsPBOgLLv9EX8LZ6xL",Ge="UjEEhwY497frsytmeR9u",He="VQ0BLAewv7Aw5H3hV0YK",We="pxV6pRWzmVb2_leuWtEG",Ye="G97bWDW7Mp3aZEL19Umr",Xe="p6l0_RUXhei0P7rrQaeg",Ze="erd9k4EG_HWK3UzsLhht",qe="ap9brNzQxEcx9SV2FksM",Ke="pVVteJIfAdehWU3vX7JR",Qe="J_VZoZ53jBtkdyxrt2My",Je="VOGWdrCvz59_A_wAZv58",$e="m8V0BPcmce3GusmXkFhM",et=i.memo((()=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(Ve.Y,{as:"h3",variant:"titleSmall",className:Qe,charCount:4,isLoading:!0}),(0,y.jsx)("div",{className:qe,children:[20,50,25].map(((e,t)=>(0,y.jsx)(Ve.Y,{as:"div",variant:"bodySmall",className:Qe,charCount:e,isLoading:!0},`${e}-${t}`)))})]})));var tt=a(8061),at=a(62363),it=a(33031),st=a(3161);const nt={offset:0,limit:50,onlyUnPlayedItems:!1};const lt={[Ue.tv.Album]:{id:"ALBUM",getName:()=>d.Ru.get("web-player.whats-new-feed.filters.music"),ubiId:"Music",active:!1},[Ue.tv.Episode]:{id:"EPISODE",getName:()=>d.Ru.get("web-player.whats-new-feed.filters.episodes"),ubiId:"Podcast & Shows",active:!1}};function rt(e){switch(e){case Ue.tv.Album:return Ue.tv.Album;case Ue.tv.Episode:return Ue.tv.Episode;case Ue.tv.WhatsNewFeedNotification:return Ue.tv.WhatsNewFeedNotification;case Ue.tv.Unknown:default:return Ue.tv.Unknown}}const ot=({spec:e,items:t})=>{const[a,s]=(0,i.useState)([]),n=e=>{const t=e.state.state;if(!e.state.timestamp?.isoString&&t===Ue.GN.New)return!0;if(e.state.timestamp?.isoString){const t=new Date(e.state.timestamp.isoString).getTime();return Date.now()-t<=36e5}return!1},l=t.findIndex((e=>!n(e))),o=(0,i.useCallback)(((t,a)=>{const i=n(t)&&a<l,s=i&&0===a;return(0,y.jsxs)("div",{className:$e,children:[s&&(0,y.jsx)(r.E,{as:"h3",variant:"titleSmall",className:He,semanticColor:"textBase",children:d.Ru.get("web-player.whats-new-feed.new-section-title")}),!i&&a===l&&(0,y.jsx)(r.E,{as:"h3",variant:"titleSmall",className:He,semanticColor:"textBase",children:d.Ru.get("web-player.whats-new-feed.earlier-section-title")}),(0,y.jsx)("hr",{className:Je,"aria-hidden":!0}),(0,y.jsx)(ze,{item:t,spec:e.notificationItemFactory({identifier:t.id,position:a})},t.id)]},t.id)}),[l,e]),c=(0,i.useRef)(0),u=(0,i.useCallback)((()=>{const e=t.slice(c.current,c.current+10);s((t=>(c.current=c.current+10,[...t,...e])))}),[t]),{ref:m,breakpoint:p}=(0,at.x)({[U.E.MEDIUM]:0,[U.E.LARGE]:600});return(0,y.jsx)(G.o.Provider,{value:p,children:(0,y.jsx)("div",{className:Ze,role:"list",ref:m,children:(0,y.jsx)(tt._,{onReachBottom:u,triggerOnInitialLoad:!0,children:a.map(o)})})})},ct=({includedContentTypes:e,data:t,handleRetry:a,error:i,spec:s,loading:n})=>{if(n)return(0,y.jsxs)("div",{className:We,role:"list",children:[(0,y.jsx)(et,{}),(0,y.jsx)(et,{})]});if(i)return(0,y.jsxs)("div",{className:Ye,dir:"auto",children:[(0,y.jsx)(r.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:d.Ru.get("error.generic")}),(0,y.jsx)(r.E,{as:"p",variant:"bodyMedium",children:d.Ru.get("web-player.whats-new-feed.panel.error")}),(0,y.jsx)(o.n,{className:Xe,onClick:a,size:"small",children:(0,y.jsx)(r.E,{as:"span",variant:"bodyMediumBold",semanticColor:"textBase",children:d.Ru.get("web-player.whats-new-feed.panel.error.button")})})]});const l=t?.whatsNewFeedItems?.items;if(!l||0===l?.length){const{title:t,message:a}=function(e=[]){return e.includes(Ue.tv.Episode)?{title:d.Ru.get("web-player.whats-new-feed.panel.empty-results-podcast.title"),message:d.Ru.get("web-player.whats-new-feed.panel.empty-results-podcast.message")}:e.includes(Ue.tv.Album)?{title:d.Ru.get("web-player.whats-new-feed.panel.empty-results-music.title"),message:d.Ru.get("web-player.whats-new-feed.panel.empty-results-music.message")}:{title:d.Ru.get("web-player.whats-new-feed.panel.empty-results-all.title"),message:d.Ru.get("web-player.whats-new-feed.panel.empty-results-all.message")}}(e);return(0,y.jsx)(u.p,{title:t,message:a,renderInline:!0})}return(0,y.jsx)(ot,{items:l,spec:s},e.join(" "))},dt=()=>{const e=(0,s.jE)(),{spec:t,logger:a}=(0,st.r)(c.q,{}),n=(0,i.useCallback)((()=>{const{name:e}=p.lo;return[e]}),[]),o=(0,i.useCallback)((()=>{e.invalidateQueries({queryKey:n()})}),[e,n]);(0,i.useEffect)((()=>{a.logImpression(t.impression())}),[a,t]);const[u,h]=(0,i.useState)(lt),g=Object.values(u),x=g.filter((e=>e.active)),v=x.length>0?[]:g,f=x.map((e=>e.id)),w=(0,i.useCallback)((e=>{const t=rt(e),a={id:u[t]?.id||Ue.tv.Unknown,getName:()=>u[t]?.getName()||"",ubiId:u[t]?.ubiId||"",active:!u[t]?.active},i={...lt,...u,[a.id||"UNKNOWN"]:a};h(i)}),[u,h]),j=(0,i.useCallback)((()=>{h(lt)}),[h]),{data:N,error:k,loading:C}=(0,it.I)(p.lo,{...nt,includedContentTypes:f.map(rt)??[]},{gcTime:30*it.i}),{getGraphQLLoader:I}=(0,m.mv)(),E=I();return(0,i.useEffect)((()=>{if(!N?.whatsNewFeedItems?.items)return;const e=N?.whatsNewFeedItems?.items.filter((e=>e.state.state===Ue.GN.New)).map((e=>({id:e.id,state:Ue.GN.Seen})));e.length>0&&async function(e,t){await e(p.BP,{items:t})}(E,{items:e})}),[N?.whatsNewFeedItems?.items,E]),(0,y.jsxs)("section",{className:l()(Ke,"contentSpacing"),children:[(0,y.jsxs)("div",{className:Oe,children:[(0,y.jsx)(r.E,{as:"h1",semanticColor:"textBase",variant:"titleMedium",className:Ge,children:d.Ru.get("web-player.whats-new-feed.panel.title")}),(0,y.jsx)(r.E,{as:"p",semanticColor:"textSubdued",variant:"bodySmall",children:d.Ru.get("web-player.whats-new-feed.panel.subtitle")})]}),!k&&(0,y.jsx)(b,{availableFilters:v,toggleFilterId:w,selectedFilters:x,resetFilterIds:j,spec:t.filterChipsFactory()}),(0,y.jsx)(ct,{includedContentTypes:f.map(rt),data:N,loading:C,error:k??null,spec:t,handleRetry:o})]})}},6526:(e,t,a)=>{a.d(t,{V:()=>l});var i=a(30758),s=a(45005),n=a(33924);function l(e){const t=(0,s.o_h)(e);let a="";return t&&(a=t.toURLPath(!0)),function(e){const t=(0,n.g)();return(0,i.useCallback)((()=>{""!==e&&t(e)}),[e,t])}(a)}},10126:(e,t,a)=>{a.d(t,{p:()=>C});var i=a(30758),s=a(97500),n=a.n(s),l=a(44004),r=a(88019),o=a(91262),c=a(35570);const d="(min-width: 0px)",u="(min-width: 0px) and (max-width: 767px)",m="(min-width: 768px)",p="(min-width: 768px) and (max-width: 1023px)",h="(min-width: 1024px)",g="(min-width: 1024px) and (max-width: 1279px)",x="(min-width: 1280px)",y="(min-width: 1280px) and (max-width: 1919px)",v="(min-width: 1920px)",b="FvfvGU3jvHRskUU9v9_8",f="Q9AlbZn2EGzy3MTWXa8X",w="mxmxS0y8LiwSs5nueKPT",j="GXxVAveNFStY3pBI_NO4",N="eHcXC2s97InYP7rMNT0H";var k=a(86070);const C=(0,i.memo)((function(e){const{children:t,message:a,title:i,linkTitle:s,linkTo:C,onClick:I,renderInline:E=!1}=e,{isXSOnly:F,isSMOnly:S}={isXS:(0,c.U)(d),isXSOnly:(0,c.U)(u),isSM:(0,c.U)(m),isSMOnly:(0,c.U)(p),isMD:(0,c.U)(h),isMDOnly:(0,c.U)(g),isLG:(0,c.U)(x),isLGOnly:(0,c.U)(y),isXL:(0,c.U)(v)},R=F||S;return(0,k.jsxs)("section",{className:n()(b,{[f]:E}),children:[t,(0,k.jsx)(l.E,{as:"h1",variant:R?"titleSmall":"titleMedium",className:j,children:i}),(0,k.jsx)(l.E,{variant:R?"bodySmall":"bodyMedium",className:N,children:a}),s&&(C||I)&&(0,k.jsx)(r.$,{colorSet:"invertedLight",className:w,href:C,onClick:I,component:o.v,children:s})]})}))},13297:(e,t,a)=>{a.d(t,{P:()=>i.P});var i=a(44718)},21147:(e,t,a)=>{a.d(t,{m:()=>w});var i=a(62764),s=a(30758),n=a(93769),l=a(35973),r=a(86321),o=a(59133),c=a(81572),d=a(66973),u=a(9602),m=a(72718),p=a(78458),h=a(55524),g=a(2514),x=a(53589),y=a(32769),v=a(86403),b=y.Ay.button.withConfig({displayName:"ChipClear__ChipClearComponent",componentId:"sc-zv5btm-0"})(["",""],(function(e){var t=e.$size,a=e.$isUsingKeyboard,i=e.$useBrowserDefaultFocusStyle;return(0,v.AH)(["",";",";",";border-radius:50%;display:inline-flex;vertical-align:middle;padding:",";transition-property:background-color,color;transition-duration:var(--shortest-3);transition-timing-function:var(--productive);background-color:",";&:hover{background-color:",";transition-duration:var(--shortest-1);}&:active{background-color:",";}&:disabled,&[aria-disabled='true']{background-color:",";opacity:",";cursor:",";}&:not(:last-child){margin-inline-end:",";margin-block-end:",";}"],(0,u.W)(),(0,m.y0)(i),!i&&(0,p.X2)("50%",a),"sm"===t?(0,h.po)("tighter-2","8px"):(0,h.po)("tighter","12px"),(0,g.oj)(g.ZI.backgroundTintedBase),(0,g.oj)(g.ZI.backgroundTintedHighlight),(0,g.oj)(g.ZI.backgroundTintedPress),(0,g.oj)(g.ZI.backgroundTintedBase),x.ok,x.zM,(0,h.po)("tighter-2","8px"),(0,h.po)("tighter-2","8px"))})),f=["size"],w=s.forwardRef((function(e,t){var a=e.size,u=void 0===a?"sm":a,m=(0,i.A)(e,f),p=(0,s.useContext)(r.E).isUsingKeyboard,h=(0,s.useContext)(n.g).useBrowserDefaultFocusStyle,g=(0,s.useContext)(l.i_),x="sm"===u?"small":"medium";return"next"===(0,l.BS)(l.NH.chip,g)?s.createElement(c.v,Object.assign({ref:t,size:u,iconLeading:d.M},m,{"data-encore-id":o.j.ChipClear})):s.createElement(b,Object.assign({ref:t,$size:u,$isUsingKeyboard:p,$useBrowserDefaultFocusStyle:h},m,{"data-encore-id":o.j.ChipClear}),s.createElement(d.M,{size:x,"aria-hidden":"true"}))}))},23422:(e,t,a)=>{a.d(t,{X:()=>s});var i=a(15727);function s(e){return[i.kw.YES,i.kw.DOWNLOADING,i.kw.WAITING].includes(e)}},44718:(e,t,a)=>{a.d(t,{P:()=>m});var i=a(15772),s=a(49225),n=a(41531),l=a(309),r=a(34455),o=a(90423),c=a(89151),d=a(38138),u=a(86070);const m=({episode:e,showVideoBadge:t=!1})=>{const{badges:a}=(0,d.b)((e=>"contentRating"in e)(e)?{contentRating:e?.contentRating?.label,isPaywalled:e.podcastSubscription?.isPaywalled,isVideo:e.mediaTypes?.includes(c.C.Video)}:{isExplicit:e?.isExplicit,isMOGEFRestricted:e?.is19PlusOnly,isPaywalled:e.podcastSubscription?.isPaywalled}),m=e.gatedEntityRelations&&e.gatedEntityRelations.entitiesWithValueProps.at(0),p=(0,n.B)(m,e);return(0,u.jsxs)(u.Fragment,{children:[a.explicit&&(0,u.jsx)(l.U,{}),p?(0,u.jsx)(s.x,{gatedEntityRelations:e.gatedEntityRelations}):a.paid&&(0,u.jsx)(r.y,{}),a.nineteen&&(0,u.jsx)(o.q,{size:16}),t&&a.isVideo&&(0,u.jsx)(i.T,{})]})}},51763:(e,t,a)=>{a.d(t,{e:()=>c});var i=a(30758),s=a(23115),n=a(92915),l=a(19792),r=a(86070);const o=i.memo((function({uri:e,size:t=s.M.md,className:a,onClick:o,showUpsell:c,canDownload:d,condensed:u}){const[m,p]=(0,l.A)(e),h=(0,n.W)(),g=(0,i.useCallback)((()=>{h({targetUri:e,intent:m?"remove-from-library":"add-to-library",type:"click"}),p(!m)}),[h,e,m,p]);return(0,r.jsx)(s.f,{className:a,isFollowing:m,onFollow:g,onClick:o,uri:e,size:t,showUpsell:c,canDownload:d,condensed:u})})),c=i.memo((function(e){return(0,r.jsx)(o,{...e})}))},81393:(e,t,a)=>{a.d(t,{d:()=>c});var i=a(97500),s=a.n(i),n=a(41985),l=a(70330);const r="UyzJidwrGk3awngSGIwv";var o=a(86070);const c=({durationMs:e,className:t,displaySeconds:a})=>{const{hours:i,minutes:c,seconds:d}=(0,n.S)(e);return a=!1!==a&&!i&&d,(0,o.jsx)("span",{className:s()(r,t),children:(0,l.j)({h:i,m:c,s:a?d:0})})}},83348:(e,t,a)=>{a.d(t,{s:()=>g});var i=a(30758),s=a(97500),n=a.n(s),l=a(81572),r=a(21147),o=a(62798),c=a(86113);const d="IVnoxrO3iL_tz5ULI8g_";var u=a(86070);const m={marginBlockEnd:0,willChange:"transform, opacity"},p=({filterId:e=null,isPrimaryFilter:t,isPlaceholder:a,resetFilterIds:s,toggleFilterId:r,className:o,innerRef:c,onFilterClick:p,index:h=0,...g})=>{const x=g.selected,y=(0,i.useCallback)((()=>{if(!e)return s(),void p(null,!1,h);p(e,!!x,h),r(e)}),[e,s,r,p,x,h]),v=(0,i.useCallback)((e=>{e.detail>1||a||y()}),[a,y]);return(0,u.jsx)(l.v,{...g,className:n()(o,{[d]:a}),onClick:v,selectedColorSet:"invertedLight",secondary:x&&!t,style:m,ref:c,tabIndex:-1})},h=({filterId:e=null,isPlaceholder:t,resetFilterIds:a,toggleFilterId:s,className:l,innerRef:o,onFilterClick:c,index:p=0,...h})=>{const g=h.selected,x=(0,i.useCallback)((()=>{if(!e)return a(),void c(null,!1,p);c(e,!!g,p),s(e)}),[e,a,s,c,g,p]),y=(0,i.useCallback)((e=>{e.detail>1||t||x()}),[t,x]);return(0,u.jsx)(r.m,{...h,"aria-label":h["aria-label"],className:n()(l,{[d]:t}),onClick:y,style:m,ref:o,tabIndex:-1})},g=(0,i.memo)((function({placeholderFilters:e=[],availableFilters:t,selectedFilters:a,toggleFilterId:s,resetFilterIds:n,onFilterClick:l,ariaLabel:r,clearBtnAriaLabel:d,className:m,applyLightThemeControls:g=!1}){const x=!(a||t),y=x?e:[...a??[],...t??[]],v=(0,i.useRef)(null),b=(0,i.useCallback)((()=>{(0,c.MS)(v.current,v.current?.nextElementSibling instanceof HTMLElement?v.current?.nextElementSibling:null),n()}),[n]);return 0===y.length?null:(0,u.jsxs)(o.FN,{className:m,ariaLabel:r,applyLightThemeControls:g,children:[!!a?.length&&(0,u.jsx)(h,{resetFilterIds:b,toggleFilterId:s,onFilterClick:l,"aria-label":d??r,innerRef:v}),y.map(((e,t)=>{const i=a?.includes(e),r=0===t;return(0,u.jsx)(p,{filterId:e.id,isPrimaryFilter:r,isPlaceholder:x,onFilterClick:l,resetFilterIds:n,toggleFilterId:s,selected:i,index:t,children:e.getName()},e.id)}))]})}))},86517:(e,t,a)=>{a.d(t,{j:()=>I});var i=a(49365);const s="wIA_5Ypq0rltNPeZQpM4",n="Swi6YtNEFCCVz8l4y75v",l="pklLPOhfigdytL9bPoth",r="sb24Y8kdMZInJ8aI8dXT";var o=a(86070);function c({ariaValueText:e,max:t,current:a}){const i=t&&a?100*Math.min(1,a/t):0,c={transform:`translateX(-${100-i}%)`},d=e||`${Math.round(i)}%`;return(0,o.jsxs)("div",{className:s,role:"progressbar",tabIndex:0,"aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":t,"aria-valuetext":d,children:[(0,o.jsx)("div",{className:n}),(0,o.jsx)("div",{className:l,children:(0,o.jsx)("div",{"data-testid":"progressBarFg",className:r,style:c})})]})}const d="qfYkuLpETFW3axnfMntO",u="_q93agegdE655O5zPz6l",m="z7Yl7CIT1AB0y91f_moh",p="iLIlkUcfIq56KncGtX7u",h="nV50yZ6BR_TIuWP3l7b1",g="qLjIx_SzBEpDRA_q7kxQ";var x=a(44004),y=a(64985),v=a(79252),b=a(97500),f=a.n(b),w=a(81393),j=a(41985),N=a(70330);const k="xWm_uA0Co4SXVxaO7wlB",C=({durationMs:e,className:t,displaySeconds:a})=>{const{hours:i,minutes:s,seconds:n}=(0,j.S)(e);a=!1!==a&&!i&&n;const l=(0,N.j)({h:i,m:s,s:a?n:0});return l?(0,o.jsx)("span",{className:f()(k,t),children:v.Ru.get("time.left",l)}):null},I=e=>{const{resumePositionMs:t=0,releaseDate:a,isPlaying:s,fullyPlayed:n,durationMs:l,position:r=t,compactVariant:b=!1,className:j,progressBarClassName:N,progressStateClassName:k,releaseDateClassName:I}=e,E=a&&a.isoString?(0,o.jsx)(x.E,{as:"p",variant:"bodySmall",className:u,children:(0,i.V2)((0,i.ad)(a.isoString),a.precision)}):null,F=(()=>{if(0===l)return null;if(n&&!s)return(0,o.jsxs)("div",{className:f()(p,k),children:[(0,o.jsx)(x.E,{as:"p",variant:"bodySmall",className:m,children:v.Ru.get("episode.audiobook.chapter.finished")}),(0,o.jsx)(y.i,{size:"small",className:g,"aria-hidden":"true"})]});if(r>0||s){const e=Math.ceil(Math.max(l-r,0));return(0,o.jsx)("div",{className:f()(p,k),children:(0,o.jsx)(x.E,{as:"p",variant:"bodySmall",className:m,children:(0,o.jsx)(C,{durationMs:e,displaySeconds:!b&&void 0})})})}return(0,o.jsx)(x.E,{as:"p",variant:"bodySmall",className:f()(u,I),"data-testid":"episode-progress-not-played",children:(0,o.jsx)(w.d,{durationMs:l,displaySeconds:!b&&void 0})})})(),S=0===l?null:!n&&r>0||s?(0,o.jsx)("div",{className:f()(h,N),children:(0,o.jsx)(c,{current:r,max:l})}):null;return E||F||S?(0,o.jsxs)("div",{className:f()(d,j),children:[E,F,S]}):null}}}]);
//# sourceMappingURL=dwp-whats-new-feed.js.map