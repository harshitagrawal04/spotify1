"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[777],{6253:(t,e,a)=>{a.d(e,{WatchFeedViewContainer:()=>tn});var n=a(1072),o=a(31166),i=a(30758),r=a(36956),s=a(86070);const c=(0,i.createContext)(null);function l(){const t=(0,i.useContext)(c);if(null===t)throw new Error("Trying to use 'OverturePlaybackContext' without 'OverturePlaybackProvider'!");return t}const u=({children:t,overridePlatformId:e})=>{const a=(0,i.useMemo)((()=>({videoPlayerContainer:".playbackContainerWatchFeed",audioPlayerContainer:".playbackContainerWatchFeed"})),[]),n=(0,r.H)(a,void 0,void 0,void 0,e);return(0,s.jsx)(c.Provider,{value:n,children:t})};var d=a(97500),h=a.n(d),p=a(40638),m=a(91068),g=a(44004),f=a(43409),v=a(66973);const b="music",y="1.0.0",_="default",x="16.0.1";function L(t){return new j(t)}class j{constructor(t){this._path=[{name:"desktop-watch-feed-view",...t.data}],t?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=t.parentAbsoluteLocation)}closeButtonFactory(){return new j.CloseButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}muteButtonFactory(){return new j.MuteButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}followButtonFactory(){return new j.FollowButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}artistNameFactory(){return new j.ArtistNameEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}hashtagButtonFactory(t){return new j.HashtagButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:t})}shareButtonFactory(){return new j.ShareButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}addToQueueFactory(){return new j.AddToQueueEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}nextButtonFactory(){return new j.NextButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}previousButtonFactory(){return new j.PreviousButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}trackTitleFactory(t){return new j.TrackTitleEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:t})}albumTitleFactory(){return new j.AlbumTitleEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitUiHide(){return{actionName:"ui_hide",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}!function(t){t.CloseButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"close_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitUiHide(){return{actionName:"ui_hide",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={})),function(t){t.MuteButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"mute_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitMutePlayback(){return{actionName:"mute_playback",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitUnmutePlayback(){return{actionName:"unmute_playback",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={})),function(t){t.FollowButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"follow_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitFollow({itemToBeFollowed:t}){return{actionParameterNames:["item_to_be_followed"],actionParameterValues:[t.toString()],actionName:"follow",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitUnfollow({itemToBeUnfollowed:t}){return{actionParameterNames:["item_to_be_unfollowed"],actionParameterValues:[t.toString()],actionName:"unfollow",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={})),function(t){t.ArtistNameEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"artist_name"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitUiNavigate({destination:t}){return{actionParameterNames:["destination"],actionParameterValues:[t.toString()],actionName:"ui_navigate",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={})),function(t){t.HashtagButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({...a,name:"hashtag_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitUiNavigate({destination:t}){return{actionParameterNames:["destination"],actionParameterValues:[t.toString()],actionName:"ui_navigate",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={})),function(t){t.ShareButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"share_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitShare({entityToBeShared:t,shareId:e}){return{actionParameterNames:["entity_to_be_shared","share_id"],actionParameterValues:[t.toString(),e.toString()],actionName:"share",actionVersion:2,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={})),function(t){t.AddToQueueEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"add_to_queue"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitAddItemToQueue({itemToAddToQueue:t}){return{actionParameterNames:["item_to_add_to_queue"],actionParameterValues:[t.toString()],actionName:"add_item_to_queue",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={})),function(t){t.NextButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"next_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitSkipToNext({itemToBeSkipped:t,positionMs:e,totalContentMs:a}){return{actionParameterNames:["item_to_be_skipped","position_ms","total_content_ms"],actionParameterValues:[t.toString(),e.toString(),a.toString()],actionName:"skip_to_next",actionVersion:2,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={})),function(t){t.PreviousButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"previous_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitSkipToPrevious({itemToBeSkipped:t,positionMs:e,totalContentMs:a}){return{actionParameterNames:["item_to_be_skipped","position_ms","total_content_ms"],actionParameterValues:[t.toString(),e.toString(),a.toString()],actionName:"skip_to_previous",actionVersion:2,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={})),function(t){t.TrackTitleEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({...a,name:"track_title"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitUiNavigate({destination:t}){return{actionParameterNames:["destination"],actionParameterValues:[t.toString()],actionName:"ui_navigate",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}impression(){return{app:b,generatorVersion:x,specificationVersion:y,specificationMode:_,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={})),function(t){t.AlbumTitleEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"album_title"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitUiNavigate({destination:t}){return{actionParameterNames:["destination"],actionParameterValues:[t.toString()],actionName:"ui_navigate",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={}));var A=a(79252),N=a(62108),C=a(18538);function w(t){var e,a,n,o,r,s=t.size?C.$Z[t.size]:t.iconSize,c=(0,C._C)([{size:16,svgContent:"<path d='M6.46 1.5 5.4.44l-3 3L1 2.04-.06 3.1 2.4 5.56 6.46 1.5ZM7.188 6c.331-.452.596-.957.778-1.5H13.5a1 1 0 1 0 0-2H8.244A5.482 5.482 0 0 0 7.966 1H13.5a2.5 2.5 0 0 1 0 5H7.188ZM16 10.5H2V9h14v1.5Zm0 4.5H2v-1.5h14V15Z'/>"},{size:24,svgContent:"<path d='M8.414 3 7 1.586l-3.75 3.75-1.75-1.75L.086 5 3.25 8.164 8.414 3ZM11 4c0 .34-.024.673-.07 1h7.62a1.5 1.5 0 1 1 0 3H9.745a7.036 7.036 0 0 1-2.137 2H18.55a3.5 3.5 0 1 0 0-7h-7.62c.046.327.07.66.07 1Zm10 12H3v-2h18v2Zm0 6H3v-2h18v2Z'/>"}],s||24),l=null!==(e=t.autoMirror)&&void 0!==e&&e;return i.createElement(C.In,Object.assign({},t,{autoMirror:l,viewBox:"0 0 ".concat(c.size," ").concat(c.size),dangerouslySetInnerHTML:{__html:"".concat((o=t.title,r=t.titleId,o?"<title ".concat(r?'id="'.concat(r,'"'):"",">").concat(o,"</title>"):"")).concat((a=t.desc,n=t.descId,a?"<desc ".concat(n?'id="'.concat(n,'"'):"",">").concat(a,"</desc>"):"")).concat(c.svgContent)}}))}var E=a(73402),k=a(86871),S=a(92915),P=a(65882),V=a(56821);const F=i.memo((function({uri:t,className:e,onClick:a=()=>{},size:n=N.t.xs,placement:o}){const r=(0,S.W)(),{isInQueue:c,toggleInQueue:l}=(t=>{const e=(0,P.z)(),a=(0,V.w)().queued.find((e=>e.uri===t)),n=!!a,o=a?.uid;return{toggleInQueue:(0,i.useCallback)((()=>{n?e.removeFromQueue([{uri:t,uid:o??null}]):e.addToQueue([{uri:t,uid:null}])}),[o,n,e,t]),isInQueue:n}})(t),u=(0,i.useCallback)((()=>{r({intent:"add-to-queue",type:"click"}),l(),a()}),[r,l,a]),d=c?A.Ru.get("contextmenu.remove-from-queue"):A.Ru.get("contextmenu.add-to-queue");return(0,s.jsx)(k.Zp,{label:d,placement:o,children:(0,s.jsx)(f.H,{semanticColor:c?"textBrightAccent":"textSubdued",iconOnly:c?w:E.V,"aria-label":d,onClick:u,"data-testid":"add-button",size:n,className:e})})}));var M=a(24313),I=a(22148),T=a(90298),R=a(60790),B=a(45944),O=a(56785),U=a(35953),D=a(28284),W=a(33187),z=a(53936);const H="IQsUjbPtrVLyyA5iu3zQ",Q=({iconSize:t="small",toggleMute:e,isMuted:a,className:n,labelPlacement:o})=>a?(0,s.jsx)(k.Zp,{label:A.Ru.get("playback-control.unmute"),placement:o,children:(0,s.jsx)(f.H,{condensedAll:!0,onClick:e,"aria-label":A.Ru.get("playback-control.unmute"),className:n,children:(0,s.jsx)(D.X,{size:t})})}):(0,s.jsx)(k.Zp,{label:A.Ru.get("playback-control.mute"),placement:o,children:(0,s.jsxs)(f.H,{condensedAll:!0,onClick:e,"aria-label":A.Ru.get("playback-control.mute"),className:n,children:[(0,s.jsx)(W.C,{size:t}),(0,s.jsx)(z.J,{animated:!0,white:!0,className:H})]})});var q=a(8143),Z=a(8335),J=a(97547),Y=a(47290),X=a(83325);const G="JXh51ebDftiwM49U49IA",K="IId345zLSrSuzIWtN4Sd",$="EMcF5GoJ2mLzcp0t365T",tt="V795GKOEZNiChr8dJcD4",et="pGPb4TiSkhPdYEt8h2Av",at="FWBI05WNSb4HR8goMhai",nt="BWyVJ8XXZ0jRGpFaA9iW",ot="gWworaJ45IDWOdwjrZKh",it=()=>{const[t,e]=(0,i.useState)(!1);return(0,i.useLayoutEffect)((()=>{setTimeout((()=>e(!0)),200)}),[]),(0,s.jsxs)("div",{className:h()(G,{[K]:t}),children:[(0,s.jsx)("div",{className:h()(tt,et)}),(0,s.jsx)("div",{className:h()(tt,at)}),(0,s.jsx)("div",{className:h()(tt,nt)}),(0,s.jsx)("div",{className:h()(tt,at)}),(0,s.jsx)("div",{className:$}),(0,s.jsx)("div",{className:h()(tt,ot)}),(0,s.jsx)("div",{className:h()(tt,nt)}),(0,s.jsx)("div",{className:h()(tt,et)}),(0,s.jsx)("div",{className:h()(tt,at)})]})};var rt=a(49741),st=a(19103),ct=a(47994),lt=a(56958);const ut="YHeDUF3aquXRxYmKOs1A",dt="Ul_Er3t8veggCi1APkwp",ht="fhmiZPVDhaOYIlNd7Myq",pt="sJnarE2UKqyhLo0LFNqy",mt="bPMdcQr8gSb4AgWfkolx",gt="cjZ23zZucJkKFMIrGZa4",ft="qgczwXDFdF_gy4gRs3LN",vt="rCxYvbE1hq2_VEMOM6M_",bt="iQnF1gu0Mg2rGsKVHIFn";const yt=({parentEl:t,item:e})=>{const[a,n]=(0,i.useState)({shouldRender:!0,hasError:!1}),o=(0,X.Eg)(e?.canvas?.fileId,e?.canvas?.uri)&&!a.hasError;(0,i.useEffect)((()=>{n({shouldRender:!0,hasError:!1})}),[e?.uri]);const r=(0,i.useCallback)((t=>{t&&n({shouldRender:!1,hasError:!0})}),[]);return(0,q.createPortal)((0,s.jsx)(s.Fragment,{children:o&&(0,s.jsx)(Y.h,{menu:(0,s.jsx)(R.P,{uri:e.uri}),children:(0,s.jsx)("div",{className:dt,children:(0,s.jsx)(X.Gg,{fileId:e.canvas?.fileId,canvasUrl:e.canvas?.url,canvasUri:e.canvas?.uri,className:ht,overridePlatformId:rt.R,playerContainerClass:"canvasContainerWatchFeed",onError:r,playbackType:X.RT.Loop})})})}),t)},_t=(0,i.memo)((function({item:t,itemPosition:e,isActive:a,onItemPositionInView:n,carouselEl:o,itemElByPositionRef:r}){const c=function(t){return t.canvas?.thumbnail?.sources?t.canvas.thumbnail.sources.sort(((t,e)=>(e.width??0)-(t.width??0)))[0]?.url:t.coverArt?.sources.sort(((t,e)=>(e.width??0)-(t.width??0)))[0]?.url}(t),l=null===t.canvas,[u,d]=(0,i.useState)(null),{ref:p,inView:m}=(0,Z.Wx)({threshold:l?1:.6,root:o});(0,i.useEffect)((()=>{m&&n(e)}),[m,n,e]);const g=(0,i.useCallback)((t=>{r.current.set(e,t)}),[r,e]),f=(0,ct.S)([p,d,g]);return c?(0,s.jsx)(Y.h,{menu:(0,s.jsx)(R.P,{uri:t.uri}),children:(0,s.jsxs)("div",{ref:f,className:pt,children:[l&&a&&(0,s.jsx)(it,{}),(0,s.jsx)("div",{className:h()(ft,{[vt]:a,[gt]:l}),style:{"--background-color":t.coverArt?.extractedColors?.colorDark.hex??J.l0o},children:(0,s.jsx)("div",{className:mt,children:(0,s.jsx)(st._,{className:bt,loading:"lazy",src:c,radius:12,width:"100%"})})}),a&&u&&(0,s.jsx)(yt,{parentEl:u,item:t})]})}):null})),xt=({items:t,currentItemPosition:e,onItemPositionInView:a,itemElByPositionRef:n,onScroll:o,setScrollingState:r})=>{const[c,l]=(0,i.useState)(null);return(0,i.useEffect)((()=>{if((0,lt.n)())return()=>{};const t=()=>r(!0),e=()=>r(!1);return c?.addEventListener("scroll",t,{once:!0}),c?.addEventListener("scrollend",e),()=>{c?.removeEventListener("scroll",t),c?.removeEventListener("scrollend",e)}}),[c,r,e]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:ut,tabIndex:-1,ref:l,onScroll:o,onKeyDown:t=>{t.preventDefault()},children:t.map(((t,o)=>(0,s.jsx)(_t,{item:t,isActive:o===e,carouselEl:c,itemPosition:o,onItemPositionInView:a,itemElByPositionRef:n},t.uri)))})})};var Lt=a(68832),jt=a(81572),At=a(43453),Nt=a(76434),Ct=a(58206),wt=a(83968),Et=a(19792),kt=a(15845);const St="g47sxYAVvWCq_6T4Ba5L",Pt=({artistUri:t,initialLibraryState:e,spec:a})=>{const[n,o]=(0,Et.A)(t,e),r=(0,kt.s)(),c=(0,i.useCallback)((async()=>{let e;e=n?a.followButtonFactory().hitUnfollow({itemToBeUnfollowed:t}):a.followButtonFactory().hitFollow({itemToBeFollowed:t}),r.logInteraction(e);try{await o(!n)}catch{}}),[n,o,t,a,r]),l=n?A.Ru.get("unfollow"):A.Ru.get("follow");return(0,s.jsx)(wt.W,{className:St,isFollowing:n,onClick:c,buttonText:l})};var Vt=a(41421);const Ft=200,Mt="ease-in-out";var It=function(t){return t[t.UP=-1]="UP",t[t.NONE=0]="NONE",t[t.DOWN=1]="DOWN",t}(It||{});const Tt=t=>{if(!t)return It.NONE;const{previous:e,current:a}=t;return void 0===e||void 0===a?It.NONE:Math.sign(a.position-e.position)},Rt=(t,e,a)=>{if(!t.animate)return void(t.style.opacity="1");const n=Tt(a);t.animate({opacity:[0,1],transform:[`translateY(${50*n}%)`,"translateY(0%)"]},{duration:Ft,easing:Mt,fill:"forwards",delay:100})},Bt=(t,e,a,n)=>{if(!t.animate)return void a();const o=Tt(n);t.animate({opacity:[1,0],transform:["translateY(0%)",`translateY(${-1*o*50}%)`]},{duration:Ft,easing:Mt,delay:100}).addEventListener("finish",a,{once:!0})},Ot=t=>{t.animate?t.animate({opacity:[0,1]},{duration:Ft,easing:Mt,fill:"forwards"}):t.style.opacity="1"},Ut=(t,e,a)=>{if(!t.animate)return void a();t.animate({opacity:[1,0]},{duration:Ft,easing:Mt}).addEventListener("finish",a,{once:!0})},Dt=({hideEnteringElements:t,animateEnteringElements:e,animateExitingElements:a,animateFlippedElements:n})=>{t(),a(),n(),e()},Wt="dkbQiFBHMdijQeINl_ij",zt="aiSwqZguOk1P52s9o9xP",Ht="bl3iefJaRs18m1sL93Eh",Qt="zrFS4My93WidFfSAb0u6",qt="mENWYVW_PAl8OWp2Ut6e",Zt="dErRUxXewpEkZd52uLTh",Jt="q2y15bQqkJDcBixyP5oa",Yt=({mainArtist:t,hashtags:e,spec:a,logger:n,position:o,itemUri:r})=>{const{open:c}=(0,Vt.P)(),l=(0,i.useCallback)((t=>{const e=a.hashtagButtonFactory({uri:t}).hitUiNavigate({destination:t});n.logInteraction(e),c(t,"discovery")}),[n,c,a]),u=(0,i.useCallback)((()=>{const e=a.artistNameFactory().hitUiNavigate({destination:t.uri});n.logInteraction(e)}),[n,t.uri,a]);return(0,s.jsx)(Lt.ZI,{flipKey:`wf-${r}-footer`,handleEnterUpdateDelete:Dt,decisionData:{position:o},children:(0,s.jsxs)("div",{className:Wt,children:[(0,s.jsx)(Y.h,{renderInline:!0,menu:(0,s.jsx)(Nt.t,{uri:t.uri,isInLibrary:t.saved}),children:(0,s.jsxs)("div",{className:zt,children:[(0,s.jsx)("div",{className:Zt,children:(0,s.jsx)(Lt.lf,{flipId:`wf-artist-avatar-${r}`,translate:!1,opacity:!1,scale:!1,onAppear:Ot,onExit:Ut,children:(0,s.jsx)("div",{className:Zt,children:(0,s.jsx)(At.e,{label:t.name,images:t.avatar?.sources||[],width:32,userIconSize:"small"})})},`wf-artist-avatar-${r}`)}),(0,s.jsxs)("div",{className:Ht,children:[(0,s.jsx)(Lt.lf,{flipId:"wf-artist-name",translate:!0,children:(0,s.jsx)("div",{className:Zt,children:(0,s.jsx)(Lt.lf,{flipId:t.name,translate:!1,opacity:!1,scale:!1,onAppear:Ot,onExit:Ut,children:(0,s.jsx)("div",{className:Zt,children:(0,s.jsx)(g.E,{variant:"bodySmall",semanticColor:"textSubdued",children:(0,s.jsx)(Ct.N,{to:t.uri,onClick:u,children:t.name})})})},t.name)})}),t.listeners&&(0,s.jsx)(Lt.lf,{flipId:"wf-listeners",translate:!0,children:(0,s.jsx)("div",{className:Zt,children:(0,s.jsx)(g.E,{variant:"bodySmall",semanticColor:"textSubdued",className:Jt,children:A.Ru.formatNumber(t.listeners,{notation:"compact",maximumFractionDigits:0})})})})]}),(0,s.jsx)(Lt.lf,{flipId:"wf-follow-button",translate:!0,children:(0,s.jsx)("div",{className:Zt,children:(0,s.jsx)(Pt,{artistUri:t.uri,initialLibraryState:t.saved,spec:a})})})]})}),e.length>0&&(0,s.jsx)("div",{className:Qt,children:e.map(((t,e)=>(0,s.jsx)(Lt.lf,{flipId:e,translate:!0,children:(0,s.jsx)("div",{className:Zt,children:(0,s.jsx)(jt.v,{onClick:()=>l(t.uri),children:(0,s.jsx)("span",{className:qt,children:t.title})},e)})},e)))})]})})};var Xt=a(26892),Gt=a(29083),Kt=a(90897),$t=a(5533),te=a(8742);const ee="edeYmiJw2Fd9EFB2SQZo",ae="cpE_cN95GCusnLJ3Mssy",ne=()=>{const{progressMs:t,durationMs:e,animate:a}=function(){const t=l(),e=(0,i.useRef)(Date.now()),a=(0,i.useRef)(0),[n,o]=(0,i.useState)(0),[r,s]=(0,i.useState)(3e4),[c,u]=(0,i.useState)(!1),d=(0,te.g)();return t.on($t.LW.PROGRESS,(t=>{const n=Date.now();n-e.current>=500&&(o(t.data.position),e.current=n,t.data.position>a.current?u(!0):u(!1),a.current=t.data.position)})),t.on($t.LW.BEFORE_TRACK_LOAD,(()=>{o(0),u(!1)})),t.on($t.LW.DURATION_CHANGED,(t=>{s(t.data.duration)})),t.on($t.LW.TRACK_ENDED,(()=>{o(r)})),{progressMs:n,durationMs:r,animate:c&&"visible"===d}}();return(0,s.jsx)(Kt.z,{className:h()(ee,{[ae]:a}),semanticColor:"essentialBase",value:100*t/e,dir:"ltr"})};var oe=a(52748);const ie="BKbRtjcDGVGtwX86D6Q4",re="Cypiobiw1yGi5E9N48gJ",se="E0LdRRiYvrkUdZCmAXqQ",ce="yJJKqce9DPVQnrFseKKU",le="kJqlixofqKau1v1r3YSE",ue="_bMlIQGXEMMBRZOVM71Z",de="omghgDzOcUFl6oOXYNHX",he="TaaunKIj990MWZKrBWHW",pe=({item:t,handleTitleClick:e,widthBreakpoint:a,position:n})=>{const o=function(t){return t?.coverArt?.sources.sort(((t,e)=>(t.width??0)-(e.width??0)))[0]?.url}(t),i=t.canvas&&o;return(0,s.jsx)(Lt.ZI,{flipKey:`wf-${t.uri}-itemInfo`,handleEnterUpdateDelete:Dt,decisionData:{position:n},children:(0,s.jsxs)("div",{className:se,children:[(0,s.jsx)(Y.h,{renderInline:!0,menu:(0,s.jsx)(R.P,{uri:t.uri,albumUri:t.album?.uri,artists:t.artists}),children:(0,s.jsx)(Lt.lf,{flipId:`wf-title-${t.uri}`,translate:!0,onAppear:Rt,onExit:Bt,children:(0,s.jsx)("div",{className:he,children:(0,s.jsx)(g.E,{variant:a===oe.E.LARGE?"titleSmall":"titleMedium",className:ce,semanticColor:"textBase",children:(0,s.jsx)(Ct.N,{to:t.uri,onClick:e,className:le,children:t.title})})})},`wf-title-${t.uri}`)}),(0,s.jsx)("div",{children:t.artists.map(((t,e)=>(0,s.jsx)(Y.h,{renderInline:!0,menu:t?.uri?(0,s.jsx)(Nt.t,{uri:t?.uri}):null,children:(0,s.jsx)(Lt.lf,{flipId:`wf-artist-${t.uri}`,translate:!0,children:(0,s.jsxs)("div",{className:h()(he,ie),children:[e>0?A.Ru.getSeparator():null,(0,s.jsx)(Ct.N,{to:t.uri,children:(0,s.jsx)(g.E,{variant:"bodyMedium",className:re,children:t.name})})]})},`wf-artist-${t.uri}`)},e)))}),(0,s.jsxs)("div",{className:de,children:[i&&(0,s.jsx)(Y.h,{renderInline:!0,menu:t.album?.uri?(0,s.jsx)(Gt.h,{uri:t.album?.uri}):null,children:(0,s.jsx)(Lt.lf,{flipId:`wf-coverart-${t.uri}`,translate:!1,opacity:!1,scale:!1,onAppear:Ot,onExit:Ut,children:(0,s.jsx)("div",{className:he,children:(0,s.jsx)(Xt._,{src:o,className:ue})})},`wf-coverart-${t.uri}`)}),(0,s.jsx)(ne,{})]})]})})};var me=a(91975);const ge="YKRW27BSGgfw1jw43dpT",fe=()=>(0,s.jsxs)("div",{className:ut,tabIndex:0,children:[(0,s.jsx)("div",{className:pt,children:(0,s.jsx)("div",{className:ft})}),(0,s.jsx)("div",{className:pt,children:(0,s.jsx)("div",{className:ft,children:(0,s.jsx)("div",{className:ge,ref:t=>{t?.scrollIntoView({block:"center",inline:"nearest"})}})})}),(0,s.jsx)("div",{className:pt,children:(0,s.jsx)("div",{className:ft,children:(0,s.jsx)("div",{className:ge})})})]}),ve="DJxOEatMU2PHk0cCYWoX",be="FP_XXx0FMQPJEu3WzfpM",ye="JYvxp3Y58xF59FA7Mnaf",_e="WLr9Q6nJ_Hv35r7pNEa3",xe="uwkK6FkoyBrxvGSYBbhw",Le="AkStH5UDLsXzudcPz_J_",je="YmJS4xMTXdNQLvbP2VAt",Ae="Qtx4b7Wc1c7NEX49CMeH",Ne="SliTY9e8oKOiypDQdhlw",Ce="OGPXh73aLJDzhfFAdPvM",we="d9bbNw4YiAXpQpjrSgBJ",Ee="ji0qx5PBc5_4aMgNLGrp",ke="BLIxyum1wPNrFibaQ9wr",Se="NazSI1w8xaruwFqTP3sS",Pe="ZRarvpz5og3ifOVHzGOv",Ve="RQaEu8T4LvqfvRmirqJy",Fe="jskTw7aMQHNyh13AZI6R",Me="hK5DaTfJaFpo2BJuoy5k",Ie=({hide:t})=>(0,s.jsxs)("div",{className:h()(_e,ye,{[xe]:t}),children:[(0,s.jsxs)("div",{className:Me,children:[(0,s.jsx)("div",{className:Le,children:(0,s.jsx)(me.Y,{as:"div",variant:"bodySmall",charCount:8,isLoading:!0})}),(0,s.jsxs)("div",{className:se,children:[(0,s.jsx)(me.Y,{as:"div",variant:"titleMedium",charCount:10,isLoading:!0}),(0,s.jsx)(me.Y,{as:"div",variant:"bodyMedium",charCount:15,isLoading:!0}),(0,s.jsx)(me.Y,{as:"div",variant:"bodySmall",charCount:20,isLoading:!0})]}),(0,s.jsxs)("div",{className:Wt,children:[(0,s.jsx)(me.Y,{as:"div",variant:"titleSmall",charCount:10}),(0,s.jsx)(me.Y,{as:"div",variant:"bodySmall",charCount:15})]})]}),(0,s.jsx)("div",{className:Pe,children:(0,s.jsx)(fe,{})}),(0,s.jsx)("div",{className:Ee})]});var Te=a(72152),Re=a(88019),Be=a(64934),Oe=a(33638),Ue=a(51174),De=a(23581),We=a(29177),ze=a(14422),He=a(76137);const Qe="dcZW_YRCwhi9TTJMPxzX",qe="JSNVglrzXyqMjvBqTdjS",Ze="HfPg2vA6Xn7iwiUnz1e9",Je="f7MX2BXkHu1edOXcPYc6",Ye="GMCJTC2SwK0uAZrugIfm",Xe=({children:t})=>(0,s.jsx)("div",{className:Qe,children:t}),Ge=({children:t})=>{const[e,a]=(0,He.x)("watch-feed.dismissed-shortcut-onboarding",!1),n=(0,ze.W)();if((0,i.useEffect)((()=>{const t=t=>{"?"===t.key&&a(!e)};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}}),[e,a]),e)return(0,s.jsx)(s.Fragment,{children:t});const o=(0,s.jsxs)(Oe.A,{colorSet:"announcement",popoverTitle:A.Ru.get("web-player.watch-feed.view.shortcuts.title"),children:[(0,s.jsx)(g.E,{as:"p",variant:"bodyMedium",paddingBottom:"tighter-2",children:A.Ru.get("web-player.watch-feed.view.shortcuts.description")}),(0,s.jsxs)("div",{className:Je,children:[(0,s.jsxs)("div",{className:Ye,children:[(0,s.jsx)(g.E,{variant:"bodySmall",children:A.Ru.get("web-player.watch-feed.view.shortcuts.previous")}),(0,s.jsx)(Xe,{children:(0,s.jsx)(Ue.J,{size:"small"})})]}),(0,s.jsxs)("div",{className:Ye,children:[(0,s.jsx)(g.E,{variant:"bodySmall",children:A.Ru.get("web-player.watch-feed.view.shortcuts.next")}),(0,s.jsx)(Xe,{children:(0,s.jsx)(De.y,{size:"small"})})]}),(0,s.jsxs)("div",{className:Ye,children:[(0,s.jsx)(g.E,{variant:"bodySmall",children:A.Ru.get("web-player.watch-feed.view.shortcuts.add-to-library")}),(0,s.jsx)(Xe,{children:(0,s.jsx)(De.y,{size:"small",className:qe})})]}),(0,s.jsxs)("div",{className:Ye,children:[(0,s.jsx)(g.E,{variant:"bodySmall",children:A.Ru.get("web-player.watch-feed.view.shortcuts.add-to-queue")}),(0,s.jsx)(Xe,{children:(0,s.jsx)(De.y,{size:"small",className:Ze})})]}),(0,s.jsxs)("div",{className:Ye,children:[(0,s.jsx)(g.E,{variant:"bodySmall",children:A.Ru.get("web-player.watch-feed.view.shortcuts.mute-unmute")}),(0,s.jsx)(Xe,{children:(0,s.jsx)(g.E,{variant:"marginal",children:(0,s.jsx)("kbd",{children:"M"})})})]})]})]});return(0,s.jsx)(We.W,{overlay:o,onHide:()=>{a(!0)},placement:n?We.W.topLeft:We.W.leftTop,children:t})},Ke="bsYqS4l_sJOvBGGeudDj",$e="XIKBfnA7TQOV1T8LLiAS",ta="kT3dFHdVmU0vyeE71IDE",ea=({hasNext:t,hasInteracted:e,moveDown:a,isRTL:n,widthBreakpoint:o})=>{const r=A.Ru.get("web-player.watch-feed.view.next-button"),c=n?"right":"left",l=(0,i.useRef)(null);return(0,i.useLayoutEffect)((()=>{e&&l.current?.focus({preventScroll:!0})}),[e]),e?(0,s.jsx)(k.Zp,{label:r,placement:c,children:(0,s.jsx)(f.H,{className:Ke,"aria-label":r,label:r,disabled:!t,iconOnly:Te.r,onClick:()=>a(),ref:l,size:o===oe.E.SMALL?"small":"medium"})}):(0,s.jsx)("div",{className:$e,children:(0,s.jsx)(Ge,{children:(0,s.jsx)(Re.$,{className:ta,disabled:!t,colorSet:"invertedLight",iconTrailing:Be.R,onClick:()=>a(),size:o===oe.E.SMALL?"small":"medium",children:A.Ru.get("web-player.watch-feed.view.next-button")})})})};var aa=a(64671);const na="fCykqEza3WtgKmxjL0C1",oa=({hasPrevious:t,moveUp:e,isRTL:a,widthBreakpoint:n})=>{const o=A.Ru.get("web-player.watch-feed.view.previous-button"),i=a?"right":"left";return t?(0,s.jsx)(k.Zp,{label:o,placement:i,children:(0,s.jsx)(f.H,{className:na,"aria-label":o,label:o,iconOnly:aa.o,onClick:()=>e(),size:n===oe.E.SMALL?"small":"medium"})}):null};var ia=a(62411),ra=a(57198),sa=a(90726),ca=a(36138),la=a(56771),ua=a(33924);const da=({uri:t,moveUp:e,moveDown:a,toggleMute:n})=>{const o=(0,la.i)(t),r=(0,P.z)(),s=(0,ua.g)(),c=(0,ia.d4)((t=>t.platform.isDesktop)),[l,u]=(0,Et.A)(o),d=(0,i.useCallback)((()=>{u(!l)}),[l,u]),h=(0,i.useCallback)((()=>{r.addToQueue([{uri:t,uid:null}])}),[r,t]),p=(0,i.useCallback)((()=>{s(-1)}),[s]),m=(0,i.useCallback)((()=>{s(1)}),[s]);return(0,ra.N)((0,ca.p)(sa.r.GO_BACKWARDS),p,{condition:c}),(0,ra.N)((0,ca.p)(sa.r.GO_FORWARDS),m,{condition:c}),(0,ra.N)((0,ca.p)(sa.r.WF_ADD_TO_LIBRARY),d),(0,ra.N)((0,ca.p)(sa.r.WF_ADD_TO_QUEUE),h),(0,ra.N)((0,ca.p)(sa.r.WF_MUTE_UNMUTE),n),(0,ra.N)((0,ca.p)(sa.r.WF_GO_TO_PREVIOUS),e),(0,ra.N)((0,ca.p)(sa.r.WF_GO_TO_NEXT),a),null};var ha=a(43996),pa=a(97082),ma=a(12911);function ga({playbackContainerClass:t,onError:e=()=>{}}){const a=l(),[n,o]=(0,i.useState)(!1),r=(0,te.g)(),{volume:s}=(0,pa.n)(),c=(0,i.useRef)(s),u=(0,ha.J)(e);(0,i.useLayoutEffect)((()=>{s>=0&&(a.setVolume(s),c.current=s),0===s&&o(!0)}),[a,s]),(0,i.useEffect)((()=>(a.on($t.LW.TRACK_LOADED,(()=>{const e=document.getElementsByClassName(t),a=e[0]?.querySelector("video");a&&(a.loop=!0,a.muted=!1,a.autoplay=!0)})),a.on($t.LW.ERROR,(t=>{t.data.error&&u(t.data.error),u(new Error("PreviewPlayback error"))})),a.on($t.LW.MUTED_CHANGED,(({data:t})=>{o(t.muted),t.muted||a.setVolume(c.current||.7)})),()=>{a.removeListener($t.LW.TRACK_LOADED),a.removeListener($t.LW.ERROR),a.removeListener($t.LW.VOLUME_CHANGED)})),[u,a,t]);const d=(0,i.useCallback)((async()=>{const t=await a.getCurrentState(),e=t.playbackState.playing,n=t.track?.uri;"hidden"===r&&e?a.pause():"visible"!==r||e||n&&a.resume()}),[r,a]);(0,i.useEffect)((()=>{d()}),[d]);const h=(0,i.useCallback)((t=>{const e=function(t){const e=t?.preview;return t?.uri&&e?.url?(0,$t.a2)({uri:t.uri,format:"MP3",url:e.url,logData:{playbackId:(0,ma.E)()}}):null}(t);e&&a.playTracks([e],{paused:!1})}),[a]),p=(0,i.useCallback)((async()=>{a.setMuted(!n)}),[n,a]),m=(0,i.useCallback)((()=>a.getCurrentState()),[a]);return{playPreview:h,toggleMute:p,isMuted:n,getCurrentState:m}}var fa=a(85387),va=a(64232),ba=a(39736);var ya=a(758);var _a=a(23644),xa=a(2514),La=a(62491),ja=a(48526),Aa=a(74891);function Na(t){return(0,Aa.h)(t||void 0,{desiredLabel:"large",desiredSize:600})}function Ca(t){const e=t?.extractedColors?.colorDark;if(e&&!e.isFallback)return e.hex}var wa=a(18769),Ea=a(62363),ka=a(97143),Sa=a(92505),Pa=a(51283),Va=a(3161);const Fa={intent:"share",type:"click",itemIdSuffix:"watchfeed/share"},Ma="playbackContainerWatchFeed";const Ia=({watchFeedContent:t,feedUri:e,resumeOnClose:a})=>{const{close:n}=(0,Vt.P)(),o=(0,ze.W)(),[r,c]=(0,i.useState)(!1),l=(0,O.B)(),u=(0,i.useRef)(!1),d=(0,i.useRef)(new Map),[b,y]=(0,i.useState)(a),[_,x]=(0,i.useState)(!1),{closeSnackbar:j}=(0,U.d)(),{spec:C,logger:w}=(0,Va.r)(L,{data:{uri:e}}),E=(0,i.useCallback)((t=>{t&&j(),x(t)}),[j]),{content:{title:S,items:P},error:V,fetchNextPage:D,isFetching:W,hasNextPage:z}=t,[H,q]=(0,i.useState)(0),Z=P[H]||null,[J,Y]=(0,i.useState)(!Z),[X,G]=(0,i.useState)(!1);(0,i.useEffect)((()=>{Z?(G(!0),setTimeout((()=>{Y(!1)}),400)):(G(!1),Y(!0))}),[Z]);const K=(0,i.useMemo)((()=>C.trackTitleFactory({uri:Z?.uri})),[C,Z]),$=(0,Pa.t)(K);!function({currentItemUri:t,resumeOnClose:e}){const{close:a,updateLocationState:n}=(0,Vt.P)(),o=(0,fa.zy)(),r=(0,i.useRef)();(0,i.useEffect)((()=>{r.current?o.pathname!==r.current?a({resumePlayback:e,forceClose:!0}):t&&t!==o.state?.watchFeed?.lastSeenItemUri&&n({isOpen:!0,resumeOnClose:e,lastSeenItemUri:t}):r.current=o.pathname}),[a,o,e,t,n])}({currentItemUri:Z?.uri,resumeOnClose:b}),function(t){const e=(0,va.XB)(),{close:a}=(0,Vt.P)(),n=(0,i.useRef)();(0,i.useEffect)((()=>{n.current?e!==n.current&&e!==ba.Z.NowPlayingView&&a({resumePlayback:t}):n.current=e}),[a,t,e])}(b),function(t){const{close:e}=(0,Vt.P)();(0,i.useEffect)((()=>{const a=a=>{"Escape"===a.key&&(a.target instanceof HTMLElement&&a.target.closest(`#${ya.v}`)||e({resumePlayback:t}))};return document.addEventListener("keyup",a),()=>{document.removeEventListener("keyup",a)}}),[t,e])}(a);const tt=t=>{const e=C.closeButtonFactory().hitUiHide();w.logInteraction(e),n({resumePlayback:t})},et=(0,i.useCallback)((t=>{c(!0),u.current=!0,q((e=>{const a=e+t;return a in P?(setTimeout((()=>{d.current.get(a)?.scrollIntoView({block:"center",inline:"nearest",behavior:"smooth"})})),a):e}))}),[P]),{playPreview:at,toggleMute:nt,isMuted:ot,getCurrentState:it}=ga({playbackContainerClass:Ma}),rt=(0,i.useCallback)((async()=>{const{playbackState:t}=await it(),e=C.previousButtonFactory().hitSkipToPrevious({itemToBeSkipped:P[H].uri,positionMs:t.position??-1,totalContentMs:t.duration??-1});w.logInteraction(e),et(-1)}),[et,P,w,H,C,it]);(0,i.useLayoutEffect)((()=>{q(0),d.current.get(0)?.scrollIntoView({block:"center",inline:"nearest",behavior:"instant"})}),[e]),(0,i.useLayoutEffect)((()=>{0!==H&&c(!0)}),[H]);const st=(0,i.useCallback)((async()=>{const{playbackState:t}=await it(),e=C.nextButtonFactory().hitSkipToNext({itemToBeSkipped:P[H].uri,positionMs:t.position??-1,totalContentMs:t.duration??-1});w.logInteraction(e),et(1)}),[et,P,w,H,C,it]),ct=(0,p.YQ)((0,i.useCallback)((()=>{u.current=!1}),[]),100,{leading:!1,trailing:!0}),lt=(0,i.useCallback)((t=>{u.current||q(t)}),[]),ut=(0,i.useCallback)((()=>{if(ot){const t=C.muteButtonFactory().hitUnmutePlayback();w.logInteraction(t)}else{const t=C.muteButtonFactory().hitMutePlayback();w.logInteraction(t)}nt()}),[ot,w,C,nt]),dt=(0,i.useCallback)((()=>{const t=C.shareButtonFactory().hitShare({entityToBeShared:Z?.uri,shareId:Z?.sharingInfo?.shareId||""});w.logInteraction(t)}),[Z,w,C]),ht=(0,i.useCallback)((()=>{if(!Z)return;const t=C.addToQueueFactory().hitAddItemToQueue({itemToAddToQueue:Z?.uri});w.logInteraction(t)}),[Z,w,C]),pt=(0,i.useCallback)((()=>{const t=C.trackTitleFactory({uri:Z.uri}).hitUiNavigate({destination:Z.uri});w.logInteraction(t),y(!1)}),[Z,C,w]);(0,i.useEffect)((()=>{!V&&Z&&z&&function(t,e,a){return t>=e-5&&!(e>50)&&!a}(H,P.length,W)&&D()}),[V,Z,H,W,P,D,z]),(0,i.useEffect)((()=>{at(Z)}),[Z,at]),(0,i.useEffect)((()=>{q(0)}),[e]);const mt=Boolean(P[H-1]),gt=Boolean(P[H+1]),ft=(0,i.useRef)(null),{dynamicColors:vt,dynamicColorsCssVariables:bt}=function(t,e){const a=Na(t?.coverArt?.sources),n=Na(e?.coverArt?.sources),{data:o}=(0,ja.g)(a?[a]:[],{placeholderData:_a.rX});(0,ja.g)(n?[n]:[]);let i=null;if(o){const t=(0,xa.r6)((0,La.c)(o,"higherContrast"));i=(0,La.I)(t)}return{dynamicColorsCssVariables:i,dynamicColors:o}}(Z,P.at(H+1)),{breakpoint:yt}=(0,Ea.x)({[oe.E.SMALL]:0,[oe.E.MEDIUM]:778,[oe.E.LARGE]:1102},ft),_t=(0,Sa.o)((t=>(t?.restrictions?.disallowAddToQueueReasons||[]).length>0));if(V)return null;const Lt=Z?.artists[0],jt={backgroundColor:vt?.higherContrast.backgroundBase.toCSS(ka.a.RGBA)??(Ca(Z?.coverArt)||m.PQ2)},At=o?"right":"left";return(0,s.jsx)(wa.s,{focusTrapOptions:{allowOutsideClick:!0},children:(0,s.jsx)("div",{className:ve,onClick:()=>tt(a),role:"presentation",children:(0,s.jsxs)("div",{style:jt,className:be,onClick:t=>{t.stopPropagation()},role:"presentation",tabIndex:-1,children:[Z&&(0,s.jsxs)("div",{className:ye,ref:ft,children:[(0,s.jsxs)("div",{className:Me,ref:$,children:[(0,s.jsx)("div",{children:(0,s.jsx)(g.E,{className:Le,semanticColor:"textBase",children:S})}),(0,s.jsx)(pe,{item:Z,handleTitleClick:pt,widthBreakpoint:yt,position:H}),(0,s.jsx)(Yt,{mainArtist:Lt,hashtags:Z.hashtags,spec:C,logger:w,position:H,itemUri:Z.uri})]}),(0,s.jsxs)("div",{className:Pe,children:[(0,s.jsx)(xt,{items:P,currentItemPosition:H,onItemPositionInView:lt,itemElByPositionRef:d,onScroll:ct,setScrollingState:E}),(0,s.jsx)("div",{className:h()(Ve,{[Fe]:_}),ref:l})]}),(0,s.jsxs)("div",{className:Ee,children:[(0,s.jsxs)("div",{className:je,children:[(0,s.jsx)("div",{className:Ae,children:(0,s.jsx)(Q,{toggleMute:ut,isMuted:ot,labelPlacement:At,iconSize:yt===oe.E.SMALL?"small":"medium"})}),(0,s.jsx)(k.Zp,{label:A.Ru.get("close"),placement:"bottom",children:(0,s.jsx)(f.H,{onClick:()=>tt(a),"aria-label":A.Ru.get("close"),condensedAll:!0,children:(0,s.jsx)(v.M,{size:yt===oe.E.SMALL?"small":"medium"})})})]}),(0,s.jsxs)("div",{className:Ne,style:{...bt},children:[(0,s.jsx)(T.b,{renderInline:!0,placement:At,menu:(0,s.jsx)(R.P,{uri:Z.uri,albumUri:Z.album?.uri,artists:Z.artists,sharingInfo:Z.sharingInfo,menuBoundary:ft?.current||void 0}),children:(0,s.jsx)(M.e,{size:yt===oe.E.SMALL?M.M.sm:M.M.md,label:A.Ru.get("more.label.context",Z.title),placement:At,className:Ce})}),(0,s.jsx)(I.w,{ariaLabel:A.Ru.get("context-menu.copy-track-link"),uri:Z.uri,placement:At,interactionData:Fa,sharingInfo:null,size:yt===oe.E.SMALL?"small":"medium",onClick:dt}),!_t&&(0,s.jsx)(F,{uri:Z.uri,size:yt===oe.E.SMALL?"small":"medium",placement:At,onClick:ht,className:we}),(0,s.jsx)(B.g,{uri:Z.uri,size:yt===oe.E.SMALL?N.t.sm:N.t.md,labelPlacement:At,menuPlacement:At,className:ke})]}),(0,s.jsxs)("div",{className:Se,children:[(0,s.jsx)(oa,{hasPrevious:mt,moveUp:rt,isRTL:o,widthBreakpoint:yt}),(0,s.jsx)(ea,{hasNext:gt,hasInteracted:r,moveDown:st,isRTL:o,widthBreakpoint:yt}),(0,s.jsx)("div",{className:Ma}),(0,s.jsx)(da,{moveUp:rt,moveDown:st,toggleMute:nt,uri:Z.uri})]})]})]}),J&&(0,s.jsx)(Ie,{hide:X})]})})})};var Ta=a(72122),Ra=a(5820);a(33031);const Ba=new Ra.l("watchFeedView","query","4eb0691296f18d98a553ed288853f579f8c7c4fca66b80c0e223e47dd30e935b",null);const Oa=t=>{const e=function(t=[]){return t.find((t=>!!t.fileId))||null}(t.previews?.audioPreviews?.items);return{uri:t.uri,preview:e,title:t.name,album:t.albumOfTrack,artists:(a=t.artists.items,a.map((t=>({uri:t.uri,verified:t.profile.verified||!1,name:t.profile.name,avatar:t.visuals.avatarImage,saved:t.saved,listeners:t.stats.monthlyListeners})))),canvas:t.canvas,coverArt:t.albumOfTrack?.coverArt||null,sharingInfo:t.sharingInfo,hashtags:t.discoveryFeedHashtags};var a};var Ua=a(85507),Da=a(49531),Wa=a(52094),za=a(10415);function Ha(t){if("TrackResponseWrapper"===t.content.__typename&&"Track"===t.content.data.__typename){const e=t.content.data;return Oa(e)}return null}const Qa={offset:0,previousItems:[]};const qa=({discoveryFeedUri:t,firstItemUri:e,resumeOnClose:a})=>{const n=function(t){const{discoveryFeedUri:e,firstItemUri:a}=t,n=(0,ia.d4)(Ua.JJ),{request:o}=(0,i.useContext)(Wa.j),{data:r,error:s,isFetching:c,hasNextPage:l,fetchNextPage:u}=(0,Ta.q)({queryKey:["watch-feed","view",e,a],queryFn:({pageParam:t})=>(0,za.c)(o,Ba,{sp_t:(0,Da.v8)("sp_t")??"",country:n,discoveryFeedUri:e,uri:"spotify:section:0JQ5DABRtFWApcy61XJEvU",firstItemUri:t.offset?"":a??"",offset:t.offset,limit:40,previousItems:t.previousItems}),gcTime:18e5,staleTime:3e5,initialPageParam:Qa,getNextPageParam:(t,e)=>{const a=e.reduce(((t,e)=>("HomeSectionCollection"===e?.data?.homeSections.__typename&&e.data.homeSections.sections.forEach((e=>{"HomeSection"===e.__typename&&"HomeWatchFeedSectionData"===e.data?.__typename&&(t.offset=e.sectionItems.pagingInfo.nextOffset??0,t.previousItems=t.previousItems.concat(e.sectionItems.items.map((t=>Ha(t)?.uri??null)).filter((t=>null!==t))))})),t)),{...Qa});if(0!==a.offset)return a}});return{content:(0,i.useMemo)((()=>r?.pages?r.pages.reduce(((t,e)=>{const a=e?.data?.homeSections;if("HomeSectionCollection"===a?.__typename){let e=t.title;return a.sections.forEach((a=>{"HomeSection"===a.__typename&&"HomeWatchFeedSectionData"===a.data?.__typename&&(e=a.data.title?.transformedLabel||null,a.sectionItems.items.forEach((e=>{const a=Ha(e);a&&t.items.push(a)})))})),{items:t.items,title:e}}return t}),{items:[],title:null}):{items:[],title:null}),[r]),error:s,isFetching:c,hasNextPage:l,fetchNextPage:u}}({discoveryFeedUri:t,firstItemUri:e});return(0,s.jsx)(Ia,{watchFeedContent:n,resumeOnClose:a,feedUri:t})};var Za=a(33100);const Ja=new Ra.l("watchFeedEntity","query","9fc2299880ea50313d07c4e41dc53735cbe0919d826fd72027b1690e18151a1c",null);var Ya=a(17145);const Xa=({entityFeedUri:t,resumeOnClose:e,watchFeedTitle:a})=>{const n=((t,e)=>{const{request:a}=(0,i.useContext)(Wa.j),n=(0,Za.NC)(Ya.ggJ,{loadingValue:!1}),{data:o,error:r,isFetching:s,fetchNextPage:c,hasNextPage:l}=(0,Ta.q)({queryKey:["watch-feed","view",t],queryFn:({pageParam:e})=>(0,za.c)(a,Ja,{uri:t,limit:25,offset:e}),initialPageParam:0,enabled:n,getNextPageParam:t=>t?.data?.getWatchFeedForEntity.pagingInfo.nextOffset,staleTime:3e5,gcTime:18e5});return{content:(0,i.useMemo)((()=>{if(!o?.pages)return{items:[],title:null};const t=o.pages.reduce(((t,e)=>{const a=[];return e?.data?.getWatchFeedForEntity.items.forEach((t=>{"TrackResponseWrapper"===t.__typename&&"Track"===t.data.__typename&&a.push(Oa(t.data))})),t.concat(a)}),[]);return{title:e,items:t}}),[o,e]),error:r,isFetching:s,hasNextPage:l,fetchNextPage:c}})(t,a);return(0,s.jsx)(Ia,{watchFeedContent:n,resumeOnClose:e,feedUri:t})};var Ga=a(40079),Ka=a(43943);const $a=({state:t})=>{const{feedUri:e,firstItemUri:a,resumeOnClose:n,type:o,title:i}=t;if(!o)return null;switch(o){case"discovery":return(0,s.jsx)(qa,{discoveryFeedUri:e,firstItemUri:a,resumeOnClose:n});case"entity":return(0,s.jsx)(Xa,{entityFeedUri:e,resumeOnClose:n,watchFeedTitle:i??""});default:(0,Ka.k)(o)}return null},tn=()=>{const t=(0,Ga.S)();return t.isOpen?(0,s.jsx)(o.u,{pageId:n.$h.WATCHFEED,uri:t.feedUri,children:(0,s.jsx)(u,{overridePlatformId:rt.R,children:(0,s.jsx)($a,{state:t})})}):null}},31166:(t,e,a)=>{a.d(e,{u:()=>r});var n=a(30758),o=a(47145),i=a(86070);const r=({pageId:t,uri:e,children:a})=>{const r=(0,o.u)(),s=(0,o.H)();return(0,n.useEffect)((()=>{r?.reportPageView({pageId:t,navigationalRoot:s??void 0,entityUri:e})}),[t,s,r,e]),(0,i.jsx)(i.Fragment,{children:a})}},45944:(t,e,a)=>{a.d(e,{g:()=>n.g});var n=a(62451)},49741:(t,e,a)=>{a.d(e,{R:()=>o,Z:()=>n});const n="desktop-home-watch-feed",o="desktop-watch-feed"},50618:(t,e,a)=>{a.d(e,{F:()=>i});var n=a(30758),o=a(47738);function i(t,e){const a=(0,n.useRef)(e),i=(0,o.p)();a.current=e,(0,n.useEffect)((()=>i.getEvents().addListener(t,(t=>{a.current(t)}))),[t,i])}},64671:(t,e,a)=>{a.d(e,{o:()=>i});var n=a(30758),o=a(18538);function i(t){var e,a,i,r,s,c=t.size?o.$Z[t.size]:t.iconSize,l=(0,o._C)([{size:16,svgContent:"<path d='M.47 11.03a.75.75 0 0 0 1.06 0L8 4.56l6.47 6.47a.75.75 0 1 0 1.06-1.06L8 2.44.47 9.97a.75.75 0 0 0 0 1.06z'/>"},{size:24,svgContent:"<path d='M2.793 15.957a1 1 0 0 0 1.414 0L12 8.164l7.793 7.793a1 1 0 1 0 1.414-1.414L12 5.336l-9.207 9.207a1 1 0 0 0 0 1.414z'/>"}],c||24),u=null!==(e=t.autoMirror)&&void 0!==e&&e;return n.createElement(o.In,Object.assign({},t,{autoMirror:u,viewBox:"0 0 ".concat(l.size," ").concat(l.size),dangerouslySetInnerHTML:{__html:"".concat((r=t.title,s=t.titleId,r?"<title ".concat(s?'id="'.concat(s,'"'):"",">").concat(r,"</title>"):"")).concat((a=t.desc,i=t.descId,a?"<desc ".concat(i?'id="'.concat(i,'"'):"",">").concat(a,"</desc>"):"")).concat(l.svgContent)}}))}},90897:(t,e,a)=>{a.d(e,{z:()=>h});var n=a(58228),o=a(62764),i=a(30758),r=a(59133),s=a(2514),c=a(23222),l=["as","className","value","semanticColor","color","css","style"];function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){(0,n.A)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var h=function(t){var e=t.as,a=t.className,n=t.value,u=void 0===n?0:n,h=t.semanticColor,p=void 0===h?"essentialBrightAccent":h,m=(t.color,t.css),g=t.style,f=(0,o.A)(t,l),v=e||"div";return i.createElement(v,Object.assign({role:"progressbar","aria-valuenow":u,"aria-valuemin":"0","aria-valuemax":"100","data-encore-id":r.j.ProgressBar,className:(0,c.ZP)(["progress-bar"],a),style:d(d({},(0,c.Xn)("ProgressBar",m)),g)},f),i.createElement("div",{className:(0,c.ZP)(["progress-bar__indicator"]),style:{inlineSize:"".concat(u,"%"),"--progress-bar-color":(0,s.oj)(p)}}))}},97082:(t,e,a)=>{a.d(e,{n:()=>s});var n=a(30758),o=a(87460),i=a(47738),r=a(50618);function s(){const t=(0,i.p)(),[e,a]=(0,n.useState)(-1);(0,n.useEffect)((()=>{let e=!0;return(async()=>{const n=await t.getVolume();e&&a(n)})(),()=>{e=!1}}),[t]),(0,r.F)(o._.VOLUME,(t=>a(t.data.volume)));return{volume:e,setVolume:(0,n.useCallback)((e=>{a(e),t.setVolume(e)}),[t])}}}}]);
//# sourceMappingURL=dwp-watch-feed-view-container.js.map